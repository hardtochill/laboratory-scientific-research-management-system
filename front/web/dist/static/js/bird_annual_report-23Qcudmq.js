import{T as N,_ as E,g as H,r as c,B as P,d as p,H as j,c as M,o as C,i as b,f as e,I as h,j as t,s as V,h as l,n as i,x as s,e as F,C as G}from"./index-VkklmaQD.js";function J(g){return N({url:"/annualReport/list",method:"get",params:g})}function K(g){return N({url:"/annualReport/"+g,method:"get"})}const O={class:"app-container"},Q={__name:"bird_annual_report",setup(g){const{proxy:S}=H(),f=c(!1),B=c(!0),v=c(0),u=c({}),m=c(!1),x=c([]),_=c({pageNum:1,pageSize:10,threatLevel:void 0,targetType:void 0});P(()=>{y()});function $(o){S.download("annualReport/export",{id:o.id},`鸟情年报_${w(o.startDate)}.xlsx`)}const w=o=>o.substring(0,4),y=()=>{m.value=!0,J(_.value).then(o=>{const n=o.data;x.value=n.rows,v.value=n.total,m.value=!1})};function L(o){K(o.id).then(n=>{u.value=n.data,f.value=!0})}function T(o){return`${o}:00-${o+1}:00`}return(o,n)=>{const z=p("el-form"),a=p("el-table-column"),D=p("el-button"),k=p("el-table"),I=p("pagination"),d=p("el-descriptions-item"),U=p("el-descriptions"),q=p("el-dialog"),R=j("loading");return C(),M("div",O,[b(e(z,{model:t(_),ref:"queryRef",inline:!0},null,8,["model"]),[[h,t(B)]]),b((C(),V(k,{data:t(x)},{default:l(()=>[e(a,{type:"index",width:"40"}),e(a,{label:"年份",align:"center"},{default:l(r=>[i(s(w(r.row.startDate)),1)]),_:1}),e(a,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(a,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(a,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(a,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(a,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(a,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"}),e(a,{label:"操作",width:"250",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[e(D,{link:"",type:"success",icon:"View",onClick:A=>L(r.row)},{default:l(()=>n[3]||(n[3]=[i("详情")])),_:2,__:[3]},1032,["onClick"]),e(D,{link:"",type:"primary",icon:"Download",onClick:A=>$(r.row)},{default:l(()=>n[4]||(n[4]=[i("导出")])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,t(m)]]),b(e(I,{total:t(v),page:t(_).pageNum,"onUpdate:page":n[0]||(n[0]=r=>t(_).pageNum=r),limit:t(_).pageSize,"onUpdate:limit":n[1]||(n[1]=r=>t(_).pageSize=r),onPagination:y},null,8,["total","page","limit"]),[[h,t(v)>0]]),e(q,{title:"详情",modelValue:t(f),"onUpdate:modelValue":n[2]||(n[2]=r=>G(f)?f.value=r:null),width:"80%","append-to-body":""},{default:l(()=>[e(U,{column:3,border:""},{default:l(()=>[e(d,{label:"年份",span:3},{default:l(()=>[i(s(w(t(u).startDate)),1)]),_:1}),e(d,{label:"鸟出现次数"},{default:l(()=>[i(s(t(u).birdCount),1)]),_:1}),e(d,{label:"无人机出现次数"},{default:l(()=>[i(s(t(u).uavCount),1)]),_:1}),e(d,{label:"Ⅰ级威胁数量"},{default:l(()=>[i(s(t(u).count1),1)]),_:1}),e(d,{label:"Ⅱ级威胁数量"},{default:l(()=>[i(s(t(u).count2),1)]),_:1}),e(d,{label:"‌Ⅲ级威胁数量"},{default:l(()=>[i(s(t(u).count3),1)]),_:1}),e(d,{label:"Ⅳ级威胁数量"},{default:l(()=>[i(s(t(u).count4),1)]),_:1})]),_:1}),n[5]||(n[5]=F("div",{class:"tip"},"时段数据",-1)),b((C(),V(k,{data:t(u).annualReportTimeList},{default:l(()=>[e(a,{prop:"hour",label:"小时",align:"center"},{default:l(r=>[i(s(T(r.row.hour)),1)]),_:1}),e(a,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(a,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(a,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(a,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(a,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(a,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"})]),_:1},8,["data"])),[[R,t(m)]])]),_:1,__:[5]},8,["modelValue"])])}}},X=E(Q,[["__scopeId","data-v-f5b78aff"]]);export{X as default};
