import{T as $,_ as E,g as H,r as c,B as P,d as p,H as Q,c as j,o as x,i as v,f as e,I as R,j as a,s as V,h as l,n as i,x as u,e as F,C as Y}from"./index-VkklmaQD.js";function A(g){return $({url:"/quarterlyReport/list",method:"get",params:g})}function G(g){return $({url:"/quarterlyReport/"+g,method:"get"})}const J={class:"app-container"},K={__name:"bird_quarterly_report",setup(g){const{proxy:N}=H(),m=c(!1),S=c(!0),y=c(0),s=c({}),f=c(!1),D=c([]),_=c({pageNum:1,pageSize:10,threatLevel:void 0,targetType:void 0});P(()=>{h()});const w=o=>{const t=new Date(o.replace(" ","T")),C=t.getFullYear(),n=t.getMonth()+1,b=Math.floor((n-1)/3)+1;return`${C}第${b}季度`},h=()=>{f.value=!0,A(_.value).then(o=>{const t=o.data;D.value=t.rows,y.value=t.total,f.value=!1})};function B(o){G(o.id).then(t=>{s.value=t.data,m.value=!0})}function T(o){N.download("quarterlyReport/export",{id:o.id},`鸟情季度报_${w(o.startDate)}.xlsx`)}function L(o){return`${o}:00-${o+1}:00`}return(o,t)=>{const C=p("el-form"),n=p("el-table-column"),b=p("el-button"),k=p("el-table"),z=p("pagination"),d=p("el-descriptions-item"),I=p("el-descriptions"),M=p("el-dialog"),q=Q("loading");return x(),j("div",J,[v(e(C,{model:a(_),ref:"queryRef",inline:!0},null,8,["model"]),[[R,a(S)]]),v((x(),V(k,{data:a(D)},{default:l(()=>[e(n,{type:"index",width:"40"}),e(n,{prop:"startDate",label:"季度",align:"center"},{default:l(r=>[i(u(w(r.row.startDate)),1)]),_:1}),e(n,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(n,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(n,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(n,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(n,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(n,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"}),e(n,{label:"操作",width:"250",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[e(b,{link:"",type:"success",icon:"View",onClick:U=>B(r.row)},{default:l(()=>t[3]||(t[3]=[i("详情")])),_:2,__:[3]},1032,["onClick"]),e(b,{link:"",type:"primary",icon:"Download",onClick:U=>T(r.row)},{default:l(()=>t[4]||(t[4]=[i("导出")])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,a(f)]]),v(e(z,{total:a(y),page:a(_).pageNum,"onUpdate:page":t[0]||(t[0]=r=>a(_).pageNum=r),limit:a(_).pageSize,"onUpdate:limit":t[1]||(t[1]=r=>a(_).pageSize=r),onPagination:h},null,8,["total","page","limit"]),[[R,a(y)>0]]),e(M,{title:"详情",modelValue:a(m),"onUpdate:modelValue":t[2]||(t[2]=r=>Y(m)?m.value=r:null),width:"80%","append-to-body":""},{default:l(()=>[e(I,{column:3,border:""},{default:l(()=>[e(d,{label:"季度",span:3},{default:l(()=>[i(u(w(a(s).startDate)),1)]),_:1}),e(d,{label:"鸟出现次数"},{default:l(()=>[i(u(a(s).birdCount),1)]),_:1}),e(d,{label:"无人机出现次数"},{default:l(()=>[i(u(a(s).uavCount),1)]),_:1}),e(d,{label:"Ⅰ级威胁数量"},{default:l(()=>[i(u(a(s).count1),1)]),_:1}),e(d,{label:"Ⅱ级威胁数量"},{default:l(()=>[i(u(a(s).count2),1)]),_:1}),e(d,{label:"‌Ⅲ级威胁数量"},{default:l(()=>[i(u(a(s).count3),1)]),_:1}),e(d,{label:"Ⅳ级威胁数量"},{default:l(()=>[i(u(a(s).count4),1)]),_:1})]),_:1}),t[5]||(t[5]=F("div",{class:"tip"},"时段数据",-1)),v((x(),V(k,{data:a(s).quarterlyReportTimeList},{default:l(()=>[e(n,{prop:"hour",label:"小时",align:"center"},{default:l(r=>[i(u(L(r.row.hour)),1)]),_:1}),e(n,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(n,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(n,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(n,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(n,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(n,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"})]),_:1},8,["data"])),[[q,a(f)]])]),_:1,__:[5]},8,["modelValue"])])}}},W=E(K,[["__scopeId","data-v-0b6bad38"]]);export{W as default};
