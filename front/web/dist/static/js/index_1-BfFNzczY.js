import{T as k,_ as G,z as M,r,B as U,V as q,d as B,c as g,o as v,e,f as n,h as f,t as T,j as i,x as c}from"./index-VkklmaQD.js";import{g as d,i as C}from"./index-CYEFYofJ.js";function J(){return k({url:"/hourReport/getDeviceStatus",method:"get"})}function K(){return k({url:"/hourReport/getTodayTargetInfo",method:"get"})}function L(){return k({url:"/hourReport/getHourTargetInfo",method:"get"})}function P(){return k({url:"/hourReport/getNowTargetInfo",method:"get"})}const Q={class:"app-container home"},W={class:"box",style:{overflow:"hidden"}},X={class:"left1 cc"},Y={style:{display:"flex","align-items":"center",flex:"1"}},Z={class:"left1 cc"},ee={style:{display:"flex","align-items":"center",flex:"1"}},te={class:"box",style:{overflow:"hidden"}},se={style:{width:"100%",height:"100%",display:"flex","flex-wrap":"wrap","align-content":"space-between"}},oe={class:"top cc"},ne={style:{display:"flex","align-items":"center",flex:"2"}},le={class:"top-inner"},ie={key:0,style:{color:"green"}},ae={key:1,style:{color:"red"}},re={key:0,style:{color:"green"}},de={key:1,style:{color:"red"}},ue={class:"bottom cc"},ce={style:{display:"flex","align-items":"center","margin-top":"1%"}},fe={style:{width:"100%",height:"90%",display:"flex","flex-direction":"column",padding:"10px",color:"#fff"}},pe={style:{flex:"3",width:"100%",padding:"5px"}},ye={style:{width:"100%",height:"100%",background:"#2288ff","border-radius":"5px",display:"flex","justify-content":"center","align-items":"center"}},ge={class:"f1"},ve={style:{flex:"3",width:"100%",padding:"5px",display:"flex",gap:"10px"}},he={style:{flex:"1",height:"100%",background:"#0ccbcc","border-radius":"5px",display:"flex","justify-content":"center","align-items":"center"}},xe={class:"f1"},_e={style:{flex:"1",height:"100%",background:"#0ccbcc","border-radius":"5px",display:"flex","justify-content":"center","align-items":"center"}},me={class:"f1"},be={style:{flex:"4",width:"100%",padding:"5px",display:"flex",gap:"10px"}},we={style:{flex:"1",height:"100%",background:"#f08d56","border-radius":"5px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Te={class:"f1"},Ce={style:{flex:"1",height:"100%",background:"#f08d56","border-radius":"5px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},ke={class:"f1"},Ae={style:{flex:"1",height:"100%",background:"#f08d56","border-radius":"5px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Ie={class:"f1"},Fe={style:{flex:"1",height:"100%",background:"#f08d56","border-radius":"5px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Se={class:"f1"},Re={class:"box cc"},je={style:{display:"flex","align-items":"center","margin-top":"1%"}},Ne={class:"box cc"},Be={style:{display:"flex","align-items":"center","margin-top":"1%"}},De=M({name:"Index"}),ze=Object.assign(De,{setup(He){const a=r({}),p=r({}),y=r({}),h=r({}),x=r(),_=r(),m=r(),b=r();let F;U(()=>{S(),F=window.setInterval(()=>{S()},3e3);const o=new EventSource("/prod-api/hourReport/getScreenInfo");o.onmessage=function(t){console.log(t)}}),q(()=>{clearInterval(F)});function S(){D(),H(),O(),z()}const D=()=>{J().then(o=>{p.value=o.data})},z=()=>{P().then(o=>{a.value=o.data})},H=()=>{K().then(o=>{y.value=o.data;let t,s;d(x.value)?t=d(x.value):t=C(x.value),d(_.value)?s=d(_.value):s=C(_.value);let l={tooltip:{trigger:"item"},graphic:{type:"group",left:"center",top:10,children:[{type:"text",left:"center",style:{text:`鸟：${y.value.birdCount}`,fontSize:14}},{type:"text",top:20,left:"center",style:{text:`无人机：${y.value.uavCount}`,fontSize:14}},{type:"text",top:40,left:"center",style:{text:`总数：${Number(y.value.birdCount)+Number(y.value.uavCount)}`,fontSize:14}}]},series:[{type:"pie",radius:["40%","70%"],center:["50%","70%"],startAngle:180,endAngle:360,data:[{value:5,name:"鸟"},{value:10,name:"无人机"}],label:{}}]};t.setOption(l);let w={xAxis:{type:"category",data:["Ⅰ级","Ⅱ级","Ⅲ级","Ⅳ级"]},yAxis:{type:"value"},series:[{showBackground:!0,data:[5,6,8,12],type:"bar",label:{show:!0,position:"top",color:"#333",fontSize:12}}]};s.setOption(w)})},O=async()=>{L().then(o=>{h.value=o.data;let t=[],s=[],l=[],w=[],R=[],j=[],N=[];h.value&&h.value.length>0&&h.value.forEach(u=>{t.push(V(u.reportTime)),s.push(u.birdCount),l.push(u.uavCount),w.push(u.count1),R.push(u.count2),j.push(u.count3),N.push(u.count4)});let A,I;d(m.value)?A=d(m.value):A=C(m.value),d(b.value)?I=d(b.value):I=C(b.value);let $={legend:{data:["鸟","无人机"]},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value"},series:[{name:"鸟",type:"line",stack:"Total",data:s},{name:"无人机",type:"line",stack:"Total",data:l}]};A.setOption($);let E={legend:{data:["Ⅰ级","Ⅱ级","Ⅲ级","Ⅳ级"]},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value"},series:[{name:"Ⅳ级",type:"line",data:N},{name:"Ⅲ级",type:"line",data:j},{name:"Ⅱ级",type:"line",data:R},{name:"Ⅰ级",type:"line",data:w}]};I.setOption(E)})};function V(o){return`${new Date(o.replace(/-/g,"/")).getHours()}点`}return(o,t)=>{const s=B("CaretRight"),l=B("el-icon");return v(),g("div",Q,[e("div",W,[e("div",X,[e("div",Y,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[0]||(t[0]=e("span",null,"今日鸟情概览",-1))]),e("div",{style:{flex:"9",width:"100%",height:"100%"},ref_key:"todayTargetRef",ref:x},null,512)]),e("div",Z,[e("div",ee,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[1]||(t[1]=e("span",null,"今日预警概览",-1))]),e("div",{style:{flex:"9",width:"100%",height:"100%"},ref_key:"todayThreatRef",ref:_},null,512)])]),e("div",te,[e("div",se,[e("div",oe,[e("div",ne,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[2]||(t[2]=e("span",null,"设备运行状态",-1))]),e("div",le,[e("div",null,[t[3]||(t[3]=e("span",{style:{"margin-right":"10px"}},"雷达:",-1)),i(p).radar===!0?(v(),g("span",ie,"正常")):T("",!0),i(p).radar===!1?(v(),g("span",ae,"断开")):T("",!0)]),e("div",null,[t[4]||(t[4]=e("span",{style:{"margin-right":"10px"}},"光电:",-1)),i(p).video===!0?(v(),g("span",re,"正常")):T("",!0),i(p).video===!1?(v(),g("span",de,"断开")):T("",!0)])])]),e("div",ue,[e("div",ce,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[5]||(t[5]=e("span",null,"现存目标信息",-1))]),e("div",fe,[e("div",pe,[e("div",ye,[t[6]||(t[6]=e("div",{class:"f2",style:{margin:"0 5px"}}," 目标总数 ",-1)),e("div",ge,c(i(a).count),1)])]),e("div",ve,[e("div",he,[t[7]||(t[7]=e("div",{class:"f2",style:{margin:"0 5px"}}," 鸟 ",-1)),e("div",xe,c(i(a).birdCount),1)]),e("div",_e,[t[8]||(t[8]=e("div",{class:"f2",style:{margin:"0 5px"}}," 无人机 ",-1)),e("div",me,c(i(a).uavCount),1)])]),e("div",be,[e("div",we,[e("div",Te,c(i(a).level1Count),1),t[9]||(t[9]=e("div",{class:"f2"}," Ⅰ级 ",-1))]),e("div",Ce,[e("div",ke,c(i(a).level2Count),1),t[10]||(t[10]=e("div",{class:"f2"}," Ⅱ级 ",-1))]),e("div",Ae,[e("div",Ie,c(i(a).level3Count),1),t[11]||(t[11]=e("div",{class:"f2"}," Ⅲ级 ",-1))]),e("div",Fe,[e("div",Se,c(i(a).level4Count),1),t[12]||(t[12]=e("div",{class:"f2"}," Ⅳ级 ",-1))])])])])])]),e("div",Re,[e("div",je,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[13]||(t[13]=e("span",null,"鸟情小时趋势图",-1))]),e("div",{style:{width:"100%",height:"90%"},ref_key:"ref1",ref:m},null,512)]),e("div",Ne,[e("div",Be,[n(l,{style:{color:"#FFAA22"}},{default:f(()=>[n(s)]),_:1}),t[14]||(t[14]=e("span",null,"威胁小时趋势图",-1))]),e("div",{style:{width:"100%",height:"90%"},ref_key:"ref2",ref:b},null,512)])])}}}),$e=G(ze,[["__scopeId","data-v-fdb89fbb"]]);export{$e as default};
