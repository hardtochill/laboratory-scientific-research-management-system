import{T as V,g as le,r as b,A as te,J as ae,B as ne,d as r,H as oe,c as w,o as v,i as S,f as t,I as E,j as a,h as n,K as N,L as $,s as D,n as d,x as k,e as y,C as re}from"./index-VkklmaQD.js";function ue(u){return V({url:"/threatLevel/list",method:"get",params:u})}function se(u){return V({url:"/threatLevel/"+u,method:"get"})}function de(u){return V({url:"/threatLevel",method:"post",data:u})}function ie(u){return V({url:"/threatLevel",method:"put",data:u})}function me(u){return V({url:"/threatLevel/"+u,method:"delete"})}const pe={class:"app-container"},fe={class:"dialog-footer"},ge={__name:"threat_level",setup(u){const{proxy:i}=le(),{threat_level:x,target_type:B}=i.useDict("threat_level","target_type"),L=b(""),C=b(0),T=b(!1),h=b([]),I=b(!0),Q=te({form:{},queryParams:{pageNum:1,pageSize:10,level:void 0},rules:{level:[{required:!0,message:"不能为空",trigger:"blur"}],targetType:[{required:!0,message:"不能为空",trigger:"blur"}],startDistance:[{required:!0,message:"不能为空",trigger:"blur"}],endDistance:[{required:!0,message:"不能为空",trigger:"blur"}],startRcs:[{required:!0,message:"不能为空",trigger:"blur"}],endRcs:[{required:!0,message:"不能为空",trigger:"blur"}]}}),m=b(!1),{queryParams:s,form:o,rules:j}=ae(Q);ne(()=>{_()});function H(){i.$refs.levelRef.validate(p=>{p&&(o.value.id?ie(o.value).then(e=>{i.$modal.msgSuccess("修改成功"),m.value=!1,_()}):de(o.value).then(e=>{i.$modal.msgSuccess("新增成功"),m.value=!1,_()}))})}function F(){s.value.pageNum=1,_()}function J(){i.resetForm("queryRef"),F()}function K(){m.value=!1,P()}const M=p=>{se(p.id).then(e=>{o.value=e.data,m.value=!0,L.value="修改威胁等级"})},G=p=>{i.$modal.confirm("是否确认删除？").then(function(){return me(p.id)}).then(()=>{_(),i.$modal.msgSuccess("删除成功")})},_=()=>{T.value=!0,ue(s.value).then(p=>{const e=p.data;h.value=e.rows,C.value=e.total,T.value=!1})},O=()=>{P(),m.value=!0,L.value="新增威胁等级"};function P(){o.value={id:void 0,level:void 0,targetType:void 0,startDistance:void 0,endDistance:void 0,startRcs:void 0,endRcs:void 0},i.resetForm("levelRef")}return(p,e)=>{const U=r("el-option"),q=r("el-select"),f=r("el-form-item"),g=r("el-button"),z=r("el-form"),c=r("el-table-column"),A=r("dict-tag"),W=r("el-table"),X=r("pagination"),R=r("el-input-number"),Y=r("el-dialog"),Z=oe("loading");return v(),w("div",pe,[S(t(z,{model:a(s),ref:"queryRef",inline:!0},{default:n(()=>[t(f,{label:"等级",prop:"level"},{default:n(()=>[t(q,{modelValue:a(s).level,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).level=l),placeholder:"等级",clearable:"",style:{width:"200px"}},{default:n(()=>[(v(!0),w(N,null,$(a(x),l=>(v(),D(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:n(()=>[t(g,{type:"primary",icon:"Search",onClick:F},{default:n(()=>e[10]||(e[10]=[d("搜索")])),_:1,__:[10]}),t(g,{icon:"Refresh",onClick:J},{default:n(()=>e[11]||(e[11]=[d("重置")])),_:1,__:[11]}),t(g,{type:"primary",plain:"",icon:"Plus",onClick:O},{default:n(()=>e[12]||(e[12]=[d("新增")])),_:1,__:[12]})]),_:1})]),_:1},8,["model"]),[[E,a(I)]]),S((v(),D(W,{data:a(h)},{default:n(()=>[t(c,{type:"index",width:"40"}),t(c,{label:"等级",align:"center"},{default:n(l=>[t(A,{options:a(x),value:l.row.level},null,8,["options","value"])]),_:1}),t(c,{label:"目标类型",align:"center"},{default:n(l=>[t(A,{options:a(B),value:l.row.targetType},null,8,["options","value"])]),_:1}),t(c,{label:"距离(m)",align:"center",prop:"distance"},{default:n(l=>[d(k(l.row.startDistance)+" - "+k(l.row.endDistance),1)]),_:1}),t(c,{label:"rcs大小(m²)",align:"center",prop:"rcs"},{default:n(l=>[d(k(l.row.startRcs)+" - "+k(l.row.endRcs),1)]),_:1}),t(c,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[t(g,{link:"",type:"primary",icon:"Edit",onClick:ee=>M(l.row)},{default:n(()=>e[13]||(e[13]=[d("修改")])),_:2,__:[13]},1032,["onClick"]),t(g,{link:"",type:"primary",icon:"Delete",onClick:ee=>G(l.row)},{default:n(()=>e[14]||(e[14]=[d("删除")])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,a(T)]]),S(t(X,{total:a(C),page:a(s).pageNum,"onUpdate:page":e[1]||(e[1]=l=>a(s).pageNum=l),limit:a(s).pageSize,"onUpdate:limit":e[2]||(e[2]=l=>a(s).pageSize=l),onPagination:_},null,8,["total","page","limit"]),[[E,a(C)>0]]),t(Y,{title:a(L),modelValue:a(m),"onUpdate:modelValue":e[9]||(e[9]=l=>re(m)?m.value=l:null),width:"500px","append-to-body":""},{footer:n(()=>[y("div",fe,[t(g,{type:"primary",onClick:H},{default:n(()=>e[19]||(e[19]=[d("确 定")])),_:1,__:[19]}),t(g,{onClick:K},{default:n(()=>e[20]||(e[20]=[d("取 消")])),_:1,__:[20]})])]),default:n(()=>[t(z,{ref:"levelRef",model:a(o),rules:a(j),"label-width":"80px"},{default:n(()=>[t(f,{label:"等级",prop:"level"},{default:n(()=>[t(q,{modelValue:a(o).level,"onUpdate:modelValue":e[3]||(e[3]=l=>a(o).level=l),clearable:""},{default:n(()=>[(v(!0),w(N,null,$(a(x),l=>(v(),D(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"目标类型",prop:"targetType"},{default:n(()=>[t(q,{modelValue:a(o).targetType,"onUpdate:modelValue":e[4]||(e[4]=l=>a(o).targetType=l),clearable:""},{default:n(()=>[(v(!0),w(N,null,$(a(B),l=>(v(),D(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"距离下限",prop:"startDistance"},{default:n(()=>[t(R,{modelValue:a(o).startDistance,"onUpdate:modelValue":e[5]||(e[5]=l=>a(o).startDistance=l),min:0},{suffix:n(()=>e[15]||(e[15]=[y("span",null,"m",-1)])),_:1},8,["modelValue"])]),_:1}),t(f,{label:"距离上限",prop:"endDistance"},{default:n(()=>[t(R,{modelValue:a(o).endDistance,"onUpdate:modelValue":e[6]||(e[6]=l=>a(o).endDistance=l),min:0},{suffix:n(()=>e[16]||(e[16]=[y("span",null,"m",-1)])),_:1},8,["modelValue"])]),_:1}),t(f,{label:"rcs下限",prop:"startRcs"},{default:n(()=>[t(R,{modelValue:a(o).startRcs,"onUpdate:modelValue":e[7]||(e[7]=l=>a(o).startRcs=l),min:0},{suffix:n(()=>e[17]||(e[17]=[y("span",null,"m²",-1)])),_:1},8,["modelValue"])]),_:1}),t(f,{label:"rcs上限",prop:"endRcs",min:0},{default:n(()=>[t(R,{modelValue:a(o).endRcs,"onUpdate:modelValue":e[8]||(e[8]=l=>a(o).endRcs=l)},{suffix:n(()=>e[18]||(e[18]=[y("span",null,"m²",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{ge as default};
