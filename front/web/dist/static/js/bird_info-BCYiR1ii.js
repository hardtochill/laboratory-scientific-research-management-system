import{T as B,_ as ne,r as s,g as ie,B as re,d as r,H as de,c as x,o as m,i as P,f as e,I as E,j as t,h as o,K as F,L as Q,s as V,n as i,t as N,e as j,x as w,C as U}from"./index-VkklmaQD.js";function ue(_){return B({url:"/targetInfo/list",method:"get",params:_})}function se(_){return B({url:"/targetInfo/"+_,method:"get"})}function pe(_){return B({url:"/targetInfo/delVideoOnUrl",method:"delete",params:_})}function me(_){return B({url:"/targetInfo/delVideoByTimePeriod",method:"delete",params:_})}const ce={class:"app-container"},_e=["src"],fe={class:"dialog-footer"},ve={__name:"bird_info",setup(_){const f=s([]),d=s({}),C=s(!1),{proxy:b}=ie(),{threat_level:I,target_type:y}=b.useDict("threat_level","target_type"),L=s(0),$=s([]),K=s(!0),D=s(!1),T=s(!1),A=s(""),k=s(!1),u=s({pageNum:1,pageSize:10,threatLevel:void 0,targetType:void 0});re(()=>{h()});function R(){u.value.pageNum=1,h()}function G(){b.resetForm("queryRef"),R()}function J(p){T.value=!0,A.value="http://39.107.90.125:9000/"+p.videoAddress}function W(p){se(p.id).then(l=>{d.value=l.data,D.value=!0})}function X(p){b.$modal.confirm("是否确认删除？").then(function(){return pe({id:p.id,url:p.videoAddress})}).then(()=>{h(),b.$modal.msgSuccess("删除成功")})}function Z(){if(!f.value||f.value.length<2){b.$modal.msgError("未选择时间段");return}me({startTime:f.value[0],endTime:f.value[1]}).then(p=>{b.$modal.msgSuccess("删除成功"),h()})}function ee(){f.value=[],k.value=!0}const h=()=>{C.value=!0,ue(u.value).then(p=>{const l=p.data;$.value=l.rows,L.value=l.total,C.value=!1})};return(p,l)=>{const O=r("el-option"),Y=r("el-select"),z=r("el-form-item"),v=r("el-button"),le=r("el-form"),n=r("el-table-column"),g=r("dict-tag"),q=r("el-table"),te=r("pagination"),c=r("el-descriptions-item"),ae=r("el-descriptions"),S=r("el-dialog"),oe=r("el-date-picker"),H=de("loading");return m(),x("div",ce,[P(e(le,{model:t(u),ref:"queryRef",inline:!0},{default:o(()=>[e(z,{label:"等级",prop:"threatLevel"},{default:o(()=>[e(Y,{modelValue:t(u).threatLevel,"onUpdate:modelValue":l[0]||(l[0]=a=>t(u).threatLevel=a),placeholder:"等级",clearable:"",style:{width:"200px"}},{default:o(()=>[(m(!0),x(F,null,Q(t(I),a=>(m(),V(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(z,{label:"雷达类型",prop:"targetType"},{default:o(()=>[e(Y,{modelValue:t(u).targetType,"onUpdate:modelValue":l[1]||(l[1]=a=>t(u).targetType=a),placeholder:"雷达类型",clearable:"",style:{width:"200px"}},{default:o(()=>[(m(!0),x(F,null,Q(t(y),a=>(m(),V(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(z,null,{default:o(()=>[e(v,{type:"primary",icon:"Search",onClick:R},{default:o(()=>l[9]||(l[9]=[i("搜索")])),_:1,__:[9]}),e(v,{icon:"Refresh",onClick:G},{default:o(()=>l[10]||(l[10]=[i("重置")])),_:1,__:[10]}),e(v,{type:"danger",icon:"close",onClick:ee},{default:o(()=>l[11]||(l[11]=[i("批量删除录像")])),_:1,__:[11]})]),_:1})]),_:1},8,["model"]),[[E,t(K)]]),P((m(),V(q,{data:t($)},{default:o(()=>[e(n,{type:"index",width:"40"}),e(n,{label:"威胁等级",align:"center"},{default:o(a=>[e(g,{options:t(I),value:a.row.threatLevel},null,8,["options","value"])]),_:1}),e(n,{label:"雷达推断类型",align:"center"},{default:o(a=>[e(g,{options:t(y),value:a.row.targetType},null,8,["options","value"])]),_:1}),e(n,{label:"视频推断类型",align:"center"},{default:o(a=>[e(g,{options:t(y),value:a.row.targetTypePy},null,8,["options","value"])]),_:1}),e(n,{prop:"appearanceTime",label:"出现时间",align:"center",width:"160"}),e(n,{prop:"disappearanceTime",label:"消失时间",align:"center",width:"160"}),e(n,{prop:"minHorizontalDistance",label:"最小水平距离(m)",align:"center"}),e(n,{prop:"minAxialDistance",label:"最小轴向距离(m)",align:"center"}),e(n,{prop:"rcs",label:"最大rcs(m²)",align:"center"}),e(n,{prop:"pathCount",label:"点迹数量",align:"center"}),e(n,{label:"操作",width:"250",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[a.row.videoAddress?(m(),V(v,{key:0,link:"",type:"primary",icon:"VideoPlay",onClick:M=>J(a.row)},{default:o(()=>l[12]||(l[12]=[i("播放录像 ")])),_:2,__:[12]},1032,["onClick"])):N("",!0),a.row.videoAddress?(m(),V(v,{key:1,link:"",type:"danger",icon:"close",onClick:M=>X(a.row)},{default:o(()=>l[13]||(l[13]=[i("删除录像 ")])),_:2,__:[13]},1032,["onClick"])):N("",!0),e(v,{link:"",type:"success",icon:"View",onClick:M=>W(a.row)},{default:o(()=>l[14]||(l[14]=[i("详情")])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,t(C)]]),P(e(te,{total:t(L),page:t(u).pageNum,"onUpdate:page":l[2]||(l[2]=a=>t(u).pageNum=a),limit:t(u).pageSize,"onUpdate:limit":l[3]||(l[3]=a=>t(u).pageSize=a),onPagination:h},null,8,["total","page","limit"]),[[E,t(L)>0]]),e(S,{title:"鸟情历史详情",modelValue:t(D),"onUpdate:modelValue":l[4]||(l[4]=a=>U(D)?D.value=a:null),width:"80%","append-to-body":""},{default:o(()=>[e(ae,{column:3,border:""},{default:o(()=>[e(c,{label:"威胁等级"},{default:o(()=>[e(g,{options:t(I),value:t(d).threatLevel},null,8,["options","value"])]),_:1}),e(c,{label:"雷达推断类型"},{default:o(()=>[e(g,{options:t(y),value:t(d).targetType},null,8,["options","value"])]),_:1}),e(c,{label:"视频推断类型"},{default:o(()=>[e(g,{options:t(y),value:t(d).targetTypePy},null,8,["options","value"])]),_:1}),e(c,{label:"出现时间"},{default:o(()=>[i(w(t(d).appearanceTime),1)]),_:1}),e(c,{label:"消失时间"},{default:o(()=>[i(w(t(d).disappearanceTime),1)]),_:1}),e(c,{label:"最小水平距离(m)"},{default:o(()=>[i(w(t(d).minHorizontalDistance),1)]),_:1}),e(c,{label:"最小轴向距离(m)"},{default:o(()=>[i(w(t(d).minAxialDistance),1)]),_:1}),e(c,{label:"最大rcs(m²)"},{default:o(()=>[i(w(t(d).rcs),1)]),_:1}),e(c,{label:"点迹数量"},{default:o(()=>[i(w(t(d).pathCount),1)]),_:1})]),_:1}),l[15]||(l[15]=j("div",{class:"tip"},"航迹信息",-1)),P((m(),V(q,{data:t(d).targetInfoPaths},{default:o(()=>[e(n,{prop:"scanTime",label:"扫描时间",align:"center",width:"200"}),e(n,{prop:"rcs",label:"rcs(m²)",align:"center"}),e(n,{label:"目标类型",align:"center"},{default:o(a=>[e(g,{options:t(y),value:a.row.targetType},null,8,["options","value"])]),_:1}),e(n,{prop:"horizontalDistance",label:"水平距离(m)",align:"center"}),e(n,{prop:"axialDistance",label:"轴向距离(m)",align:"center"}),e(n,{prop:"azimuthAngle",label:"方位角(°)",align:"center"}),e(n,{prop:"snr",label:"信噪比(dB)",align:"center"}),e(n,{prop:"z",label:"z(m)",align:"center"})]),_:1},8,["data"])),[[H,t(C)]])]),_:1,__:[15]},8,["modelValue"]),e(S,{title:"播放回放视频",modelValue:t(T),"onUpdate:modelValue":l[5]||(l[5]=a=>U(T)?T.value=a:null),width:"60%","append-to-body":""},{default:o(()=>[t(T)?(m(),x("video",{key:0,ref:"videoPlayer",src:t(A),controls:"",autoplay:"",loop:"",width:"100%"},null,8,_e)):N("",!0)]),_:1},8,["modelValue"]),e(S,{title:"选择删除的时间段",modelValue:t(k),"onUpdate:modelValue":l[8]||(l[8]=a=>U(k)?k.value=a:null),width:"500","append-to-body":""},{footer:o(()=>[j("div",fe,[e(v,{type:"primary",onClick:Z},{default:o(()=>l[16]||(l[16]=[i("确 定")])),_:1,__:[16]}),e(v,{onClick:l[7]||(l[7]=a=>k.value=!1)},{default:o(()=>l[17]||(l[17]=[i("取 消")])),_:1,__:[17]})])]),default:o(()=>[e(oe,{modelValue:t(f),"onUpdate:modelValue":l[6]||(l[6]=a=>U(f)?f.value=a:null),"value-format":"YYYY-MM-DD hh:mm:ss",type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},be=ne(ve,[["__scopeId","data-v-7a547ce3"]]);export{be as default};
