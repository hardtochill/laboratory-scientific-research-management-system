import{T as N,_ as H,g as P,r as c,B as W,d,H as j,c as M,o as y,i as v,f as e,I as R,j as t,s as V,h as n,n as i,x as s,e as A,C as F}from"./index-VkklmaQD.js";function G(m){return N({url:"/weeklyReport/list",method:"get",params:m})}function J(m){return N({url:"/weeklyReport/"+m,method:"get"})}const K={class:"app-container"},O={__name:"bird_weekly_report",setup(m){const{proxy:S}=P(),f=c(!1),B=c(!0),w=c(0),u=c({}),b=c(!1),k=c([]),_=c({pageNum:1,pageSize:10,threatLevel:void 0,targetType:void 0});W(()=>{C()});const g=r=>r.split(" ")[0],C=()=>{b.value=!0,G(_.value).then(r=>{const a=r.data;k.value=a.rows,w.value=a.total,b.value=!1})};function $(r){J(r.id).then(a=>{u.value=a.data,f.value=!0})}function L(r){S.download("weeklyReport/export",{id:r.id},`鸟情周报_${g(r.startDate)}.xlsx`)}function T(r){return`${r}:00-${r+1}:00`}return(r,a)=>{const z=d("el-form"),l=d("el-table-column"),x=d("el-button"),D=d("el-table"),I=d("pagination"),p=d("el-descriptions-item"),U=d("el-descriptions"),q=d("el-dialog"),h=j("loading");return y(),M("div",K,[v(e(z,{model:t(_),ref:"queryRef",inline:!0},null,8,["model"]),[[R,t(B)]]),v((y(),V(D,{data:t(k)},{default:n(()=>[e(l,{type:"index",width:"40"}),e(l,{label:"时间",align:"center",width:"180"},{default:n(o=>[i(s(g(o.row.startDate))+" - "+s(g(o.row.endDate)),1)]),_:1}),e(l,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(l,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(l,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(l,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(l,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(l,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"}),e(l,{label:"操作",width:"250",align:"center","class-name":"small-padding fixed-width"},{default:n(o=>[e(x,{link:"",type:"success",icon:"View",onClick:E=>$(o.row)},{default:n(()=>a[3]||(a[3]=[i("详情")])),_:2,__:[3]},1032,["onClick"]),e(x,{link:"",type:"primary",icon:"Download",onClick:E=>L(o.row)},{default:n(()=>a[4]||(a[4]=[i("导出")])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[h,t(b)]]),v(e(I,{total:t(w),page:t(_).pageNum,"onUpdate:page":a[0]||(a[0]=o=>t(_).pageNum=o),limit:t(_).pageSize,"onUpdate:limit":a[1]||(a[1]=o=>t(_).pageSize=o),onPagination:C},null,8,["total","page","limit"]),[[R,t(w)>0]]),e(q,{title:"详情",modelValue:t(f),"onUpdate:modelValue":a[2]||(a[2]=o=>F(f)?f.value=o:null),width:"80%","append-to-body":""},{default:n(()=>[e(U,{column:3,border:""},{default:n(()=>[e(p,{label:"时间",span:3},{default:n(()=>[i(s(g(t(u).startDate))+" - "+s(g(t(u).endDate)),1)]),_:1}),e(p,{label:"鸟出现次数"},{default:n(()=>[i(s(t(u).birdCount),1)]),_:1}),e(p,{label:"无人机出现次数"},{default:n(()=>[i(s(t(u).uavCount),1)]),_:1}),e(p,{label:"Ⅰ级威胁数量"},{default:n(()=>[i(s(t(u).count1),1)]),_:1}),e(p,{label:"Ⅱ级威胁数量"},{default:n(()=>[i(s(t(u).count2),1)]),_:1}),e(p,{label:"Ⅲ级威胁数量"},{default:n(()=>[i(s(t(u).count3),1)]),_:1}),e(p,{label:"Ⅳ级威胁数量"},{default:n(()=>[i(s(t(u).count4),1)]),_:1})]),_:1}),a[5]||(a[5]=A("div",{class:"tip"},"时段数据",-1)),v((y(),V(D,{data:t(u).weeklyReportTimeList},{default:n(()=>[e(l,{prop:"hour",label:"小时",align:"center"},{default:n(o=>[i(s(T(o.row.hour)),1)]),_:1}),e(l,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(l,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(l,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(l,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(l,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(l,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"})]),_:1},8,["data"])),[[h,t(b)]])]),_:1,__:[5]},8,["modelValue"])])}}},X=H(O,[["__scopeId","data-v-d5883436"]]);export{X as default};
