import{W as Rr,X as Xr,T as Ir,_ as Wr,g as Dr,r as D,B as Fr,V as $r,d as F,c as Hr,o as Jr,e as U,f as N,h as k,j as B,n as P,Y as Gr,x as $,Z as zr}from"./index-VkklmaQD.js";var ae={exports:{}},Z={},dt;function Vr(){return dt||(dt=1,globalThis.crypto&&globalThis.crypto.getRandomValues?Z.randomBytes=function(u){var e=new Uint8Array(u);return globalThis.crypto.getRandomValues(e),e}:Z.randomBytes=function(u){for(var e=new Array(u),o=0;o<u;o++)e[o]=Math.floor(Math.random()*256);return e}),Z}var ue,pt;function H(){if(pt)return ue;pt=1;var u=Vr(),e="abcdefghijklmnopqrstuvwxyz012345";return ue={string:function(o){for(var i=e.length,t=u.randomBytes(o),l=[],s=0;s<o;s++)l.push(e.substr(t[s]%i,1));return l.join("")},number:function(o){return Math.floor(Math.random()*o)},numberString:function(o){var i=(""+(o-1)).length,t=new Array(i+1).join("0");return(t+this.number(o)).slice(-i)}},ue}var vt;function W(){return vt||(vt=1,(function(u){var e=H(),o={},i=!1,t=globalThis.chrome&&globalThis.chrome.app&&globalThis.chrome.app.runtime;u.exports={attachEvent:function(s,h){typeof globalThis.addEventListener<"u"?globalThis.addEventListener(s,h,!1):globalThis.document&&globalThis.attachEvent&&(globalThis.document.attachEvent("on"+s,h),globalThis.attachEvent("on"+s,h))},detachEvent:function(s,h){typeof globalThis.addEventListener<"u"?globalThis.removeEventListener(s,h,!1):globalThis.document&&globalThis.detachEvent&&(globalThis.document.detachEvent("on"+s,h),globalThis.detachEvent("on"+s,h))},unloadAdd:function(s){if(t)return null;var h=e.string(8);return o[h]=s,i&&setTimeout(this.triggerUnloadCallbacks,0),h},unloadDel:function(s){s in o&&delete o[s]},triggerUnloadCallbacks:function(){for(var s in o)o[s](),delete o[s]}};var l=function(){i||(i=!0,u.exports.triggerUnloadCallbacks())};t||u.exports.attachEvent("unload",l)})(ae)),ae.exports}var le,mt;function Qr(){return mt||(mt=1,le=function(e,o){if(o=o.split(":")[0],e=+e,!e)return!1;switch(o){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}),le}var ee={},gt;function Yr(){if(gt)return ee;gt=1;var u=Object.prototype.hasOwnProperty,e;function o(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch{return null}}function i(s){try{return encodeURIComponent(s)}catch{return null}}function t(s){for(var h=/([^=?#&]+)=?([^&]*)/g,c={},n;n=h.exec(s);){var r=o(n[1]),a=o(n[2]);r===null||a===null||r in c||(c[r]=a)}return c}function l(s,h){h=h||"";var c=[],n,r;typeof h!="string"&&(h="?");for(r in s)if(u.call(s,r)){if(n=s[r],!n&&(n===null||n===e||isNaN(n))&&(n=""),r=i(r),n=i(n),r===null||n===null)continue;c.push(r+"="+n)}return c.length?h+c.join("&"):""}return ee.stringify=l,ee.parse=t,ee}var ce,bt;function Cr(){if(bt)return ce;bt=1;var u=Qr(),e=Yr(),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,t=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/;function c(m){return(m||"").toString().replace(o,"")}var n=[["#","hash"],["?","query"],function(w,f){return p(f.protocol)?w.replace(/\\/g,"/"):w},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],r={hash:1,query:1};function a(m){var w;typeof window<"u"?w=window:typeof globalThis<"u"?w=globalThis:typeof self<"u"?w=self:w={};var f=w.location||{};m=m||f;var d={},_=typeof m,g;if(m.protocol==="blob:")d=new S(unescape(m.pathname),{});else if(_==="string"){d=new S(m,{});for(g in r)delete d[g]}else if(_==="object"){for(g in m)g in r||(d[g]=m[g]);d.slashes===void 0&&(d.slashes=t.test(m.href))}return d}function p(m){return m==="file:"||m==="ftp:"||m==="http:"||m==="https:"||m==="ws:"||m==="wss:"}function b(m,w){m=c(m),m=m.replace(i,""),w=w||{};var f=s.exec(m),d=f[1]?f[1].toLowerCase():"",_=!!f[2],g=!!f[3],v=0,y;return _?g?(y=f[2]+f[3]+f[4],v=f[2].length+f[3].length):(y=f[2]+f[4],v=f[2].length):g?(y=f[3]+f[4],v=f[3].length):y=f[4],d==="file:"?v>=2&&(y=y.slice(2)):p(d)?y=f[4]:d?_&&(y=y.slice(2)):v>=2&&p(w.protocol)&&(y=f[4]),{protocol:d,slashes:_||p(d),slashesCount:v,rest:y}}function R(m,w){if(m==="")return w;for(var f=(w||"/").split("/").slice(0,-1).concat(m.split("/")),d=f.length,_=f[d-1],g=!1,v=0;d--;)f[d]==="."?f.splice(d,1):f[d]===".."?(f.splice(d,1),v++):v&&(d===0&&(g=!0),f.splice(d,1),v--);return g&&f.unshift(""),(_==="."||_==="..")&&f.push(""),f.join("/")}function S(m,w,f){if(m=c(m),m=m.replace(i,""),!(this instanceof S))return new S(m,w,f);var d,_,g,v,y,T,x=n.slice(),q=typeof w,E=this,j=0;for(q!=="object"&&q!=="string"&&(f=w,w=null),f&&typeof f!="function"&&(f=e.parse),w=a(w),_=b(m||"",w),d=!_.protocol&&!_.slashes,E.slashes=_.slashes||d&&w.slashes,E.protocol=_.protocol||w.protocol||"",m=_.rest,(_.protocol==="file:"&&(_.slashesCount!==2||h.test(m))||!_.slashes&&(_.protocol||_.slashesCount<2||!p(E.protocol)))&&(x[3]=[/(.*)/,"pathname"]);j<x.length;j++){if(v=x[j],typeof v=="function"){m=v(m,E);continue}g=v[0],T=v[1],g!==g?E[T]=m:typeof g=="string"?(y=g==="@"?m.lastIndexOf(g):m.indexOf(g),~y&&(typeof v[2]=="number"?(E[T]=m.slice(0,y),m=m.slice(y+v[2])):(E[T]=m.slice(y),m=m.slice(0,y)))):(y=g.exec(m))&&(E[T]=y[1],m=m.slice(0,y.index)),E[T]=E[T]||d&&v[3]&&w[T]||"",v[4]&&(E[T]=E[T].toLowerCase())}f&&(E.query=f(E.query)),d&&w.slashes&&E.pathname.charAt(0)!=="/"&&(E.pathname!==""||w.pathname!=="")&&(E.pathname=R(E.pathname,w.pathname)),E.pathname.charAt(0)!=="/"&&p(E.protocol)&&(E.pathname="/"+E.pathname),u(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(y=E.auth.indexOf(":"),~y?(E.username=E.auth.slice(0,y),E.username=encodeURIComponent(decodeURIComponent(E.username)),E.password=E.auth.slice(y+1),E.password=encodeURIComponent(decodeURIComponent(E.password))):E.username=encodeURIComponent(decodeURIComponent(E.auth)),E.auth=E.password?E.username+":"+E.password:E.username),E.origin=E.protocol!=="file:"&&p(E.protocol)&&E.host?E.protocol+"//"+E.host:"null",E.href=E.toString()}function I(m,w,f){var d=this;switch(m){case"query":typeof w=="string"&&w.length&&(w=(f||e.parse)(w)),d[m]=w;break;case"port":d[m]=w,u(w,d.protocol)?w&&(d.host=d.hostname+":"+w):(d.host=d.hostname,d[m]="");break;case"hostname":d[m]=w,d.port&&(w+=":"+d.port),d.host=w;break;case"host":d[m]=w,l.test(w)?(w=w.split(":"),d.port=w.pop(),d.hostname=w.join(":")):(d.hostname=w,d.port="");break;case"protocol":d.protocol=w.toLowerCase(),d.slashes=!f;break;case"pathname":case"hash":if(w){var _=m==="pathname"?"/":"#";d[m]=w.charAt(0)!==_?_+w:w}else d[m]=w;break;case"username":case"password":d[m]=encodeURIComponent(w);break;case"auth":var g=w.indexOf(":");~g?(d.username=w.slice(0,g),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=w.slice(g+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(w))}for(var v=0;v<n.length;v++){var y=n[v];y[4]&&(d[y[1]]=d[y[1]].toLowerCase())}return d.auth=d.password?d.username+":"+d.password:d.username,d.origin=d.protocol!=="file:"&&p(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString(),d}function C(m){(!m||typeof m!="function")&&(m=e.stringify);var w,f=this,d=f.host,_=f.protocol;_&&_.charAt(_.length-1)!==":"&&(_+=":");var g=_+(f.protocol&&f.slashes||p(f.protocol)?"//":"");return f.username?(g+=f.username,f.password&&(g+=":"+f.password),g+="@"):f.password?(g+=":"+f.password,g+="@"):f.protocol!=="file:"&&p(f.protocol)&&!d&&f.pathname!=="/"&&(g+="@"),(d[d.length-1]===":"||l.test(f.hostname)&&!f.port)&&(d+=":"),g+=d+f.pathname,w=typeof f.query=="object"?m(f.query):f.query,w&&(g+=w.charAt(0)!=="?"?"?"+w:w),f.hash&&(g+=f.hash),g}return S.prototype={set:I,toString:C},S.extractProtocol=b,S.location=a,S.trimLeft=c,S.qs=e,ce=S,ce}var fe,yt;function M(){if(yt)return fe;yt=1;var u=Cr();return fe={getOrigin:function(e){if(!e)return null;var o=new u(e);if(o.protocol==="file:")return null;var i=o.port;return i||(i=o.protocol==="https:"?"443":"80"),o.protocol+"//"+o.hostname+":"+i},isOriginEqual:function(e,o){var i=this.getOrigin(e)===this.getOrigin(o);return i},isSchemeEqual:function(e,o){return e.split(":")[0]===o.split(":")[0]},addPath:function(e,o){var i=e.split("?");return i[0]+o+(i[1]?"?"+i[1]:"")},addQuery:function(e,o){return e+(e.indexOf("?")===-1?"?"+o:"&"+o)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},fe}var te={exports:{}},wt;function O(){return wt||(wt=1,typeof Object.create=="function"?te.exports=function(e,o){o&&(e.super_=o,e.prototype=Object.create(o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:te.exports=function(e,o){if(o){e.super_=o;var i=function(){};i.prototype=o.prototype,e.prototype=new i,e.prototype.constructor=e}}),te.exports}var he={},de,_t;function qr(){if(_t)return de;_t=1;function u(){this._listeners={}}return u.prototype.addEventListener=function(e,o){e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];i.indexOf(o)===-1&&(i=i.concat([o])),this._listeners[e]=i},u.prototype.removeEventListener=function(e,o){var i=this._listeners[e];if(i){var t=i.indexOf(o);if(t!==-1){i.length>1?this._listeners[e]=i.slice(0,t).concat(i.slice(t+1)):delete this._listeners[e];return}}},u.prototype.dispatchEvent=function(){var e=arguments[0],o=e.type,i=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+o]&&this["on"+o].apply(this,i),o in this._listeners)for(var t=this._listeners[o],l=0;l<t.length;l++)t[l].apply(this,i)},de=u,de}var Et;function L(){if(Et)return he;Et=1;var u=O(),e=qr();function o(){e.call(this)}return u(o,e),o.prototype.removeAllListeners=function(i){i?delete this._listeners[i]:this._listeners={}},o.prototype.once=function(i,t){var l=this,s=!1;function h(){l.removeListener(i,h),s||(s=!0,t.apply(this,arguments))}this.on(i,h)},o.prototype.emit=function(){var i=arguments[0],t=this._listeners[i];if(t){for(var l=arguments.length,s=new Array(l-1),h=1;h<l;h++)s[h-1]=arguments[h];for(var c=0;c<t.length;c++)t[c].apply(this,s)}},o.prototype.on=o.prototype.addListener=e.prototype.addEventListener,o.prototype.removeListener=e.prototype.removeEventListener,he.EventEmitter=o,he}var re={exports:{}},Tt;function Kr(){if(Tt)return re.exports;Tt=1;var u=globalThis.WebSocket||globalThis.MozWebSocket;return u?re.exports=function(o){return new u(o)}:re.exports=void 0,re.exports}var pe,xt;function Zr(){if(xt)return pe;xt=1;var u=W(),e=M(),o=O(),i=L().EventEmitter,t=Kr(),l=function(){};function s(h,c,n){if(!s.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this,a=e.addPath(h,"/websocket");a.slice(0,5)==="https"?a="wss"+a.slice(5):a="ws"+a.slice(4),this.url=a,this.ws=new t(this.url,[],n),this.ws.onmessage=function(p){l("message event",p.data),r.emit("message",p.data)},this.unloadRef=u.unloadAdd(function(){r.ws.close()}),this.ws.onclose=function(p){l("close event",p.code,p.reason),r.emit("close",p.code,p.reason),r._cleanup()},this.ws.onerror=function(p){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}return o(s,i),s.prototype.send=function(h){var c="["+h+"]";this.ws.send(c)},s.prototype.close=function(){var h=this.ws;this._cleanup(),h&&h.close()},s.prototype._cleanup=function(){var h=this.ws;h&&(h.onmessage=h.onclose=h.onerror=null),u.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},s.enabled=function(){return!!t},s.transportName="websocket",s.roundTrips=2,pe=s,pe}var ve,St;function en(){if(St)return ve;St=1;var u=O(),e=L().EventEmitter,o=function(){};function i(t,l){e.call(this),this.sendBuffer=[],this.sender=l,this.url=t}return u(i,e),i.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var t=this,l;this.sendStop=function(){t.sendStop=null,clearTimeout(l)},l=setTimeout(function(){t.sendStop=null,t.sendSchedule()},25)},i.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var t=this;if(this.sendBuffer.length>0){var l="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,l,function(s){t.sendStop=null,s?(t.emit("close",s.code||1006,"Sending error: "+s),t.close()):t.sendScheduleWait()}),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},ve=i,ve}var me,Rt;function tn(){if(Rt)return me;Rt=1;var u=O(),e=L().EventEmitter,o=function(){};function i(t,l,s){e.call(this),this.Receiver=t,this.receiveUrl=l,this.AjaxObject=s,this._scheduleReceiver()}return u(i,e),i.prototype._scheduleReceiver=function(){var t=this,l=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);l.on("message",function(s){t.emit("message",s)}),l.once("close",function(s,h){o("close",s,h,t.pollIsClosing),t.poll=l=null,t.pollIsClosing||(h==="network"?t._scheduleReceiver():(t.emit("close",s||1006,h),t.removeAllListeners()))})},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},me=i,me}var ge,It;function Or(){if(It)return ge;It=1;var u=O(),e=M(),o=en(),i=tn();function t(l,s,h,c,n){var r=e.addPath(l,s),a=this;o.call(this,l,h),this.poll=new i(c,r,n),this.poll.on("message",function(p){a.emit("message",p)}),this.poll.once("close",function(p,b){a.poll=null,a.emit("close",p,b),a.close()})}return u(t,o),t.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},ge=t,ge}var be,Ct;function J(){if(Ct)return be;Ct=1;var u=O(),e=M(),o=Or();function i(l){return function(s,h,c){var n={};typeof h=="string"&&(n.headers={"Content-type":"text/plain"});var r=e.addPath(s,"/xhr_send"),a=new l("POST",r,h,n);return a.once("finish",function(p){if(a=null,p!==200&&p!==204)return c(new Error("http status "+p));c()}),function(){a.close(),a=null;var p=new Error("Aborted");p.code=1e3,c(p)}}}function t(l,s,h,c){o.call(this,l,s,i(c),h,c)}return u(t,o),be=t,be}var ye,qt;function oe(){if(qt)return ye;qt=1;var u=O(),e=L().EventEmitter;function o(i,t){e.call(this);var l=this;this.bufferPosition=0,this.xo=new t("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(s,h){l._chunkHandler(s,h),l.xo=null;var c=s===200?"network":"permanent";l.emit("close",null,c),l._cleanup()})}return u(o,e),o.prototype._chunkHandler=function(i,t){if(!(i!==200||!t))for(var l=-1;;this.bufferPosition+=l+1){var s=t.slice(this.bufferPosition);if(l=s.indexOf(`
`),l===-1)break;var h=s.slice(0,l);h&&this.emit("message",h)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},ye=o,ye}var we,Ot;function kr(){if(Ot)return we;Ot=1;var u=L().EventEmitter,e=O(),o=W(),i=M(),t=globalThis.XMLHttpRequest,l=function(){};function s(n,r,a,p){var b=this;u.call(this),setTimeout(function(){b._start(n,r,a,p)},0)}e(s,u),s.prototype._start=function(n,r,a,p){var b=this;try{this.xhr=new t}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}r=i.addQuery(r,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){b._cleanup(!0)});try{this.xhr.open(n,r,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){l("xhr timeout"),b.emit("finish",0,""),b._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!p||!p.noCredentials)&&s.supportsCORS&&(this.xhr.withCredentials=!0),p&&p.headers)for(var R in p.headers)this.xhr.setRequestHeader(R,p.headers[R]);this.xhr.onreadystatechange=function(){if(b.xhr){var S=b.xhr,I,C;switch(l("readyState",S.readyState),S.readyState){case 3:try{C=S.status,I=S.responseText}catch{}C===1223&&(C=204),C===200&&I&&I.length>0&&b.emit("chunk",C,I);break;case 4:C=S.status,C===1223&&(C=204),(C===12005||C===12029)&&(C=0),l("finish",C,S.responseText),b.emit("finish",C,S.responseText),b._cleanup(!1);break}}};try{b.xhr.send(a)}catch{b.emit("finish",0,""),b._cleanup(!1)}},s.prototype._cleanup=function(n){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),n)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!t;var h=["Active"].concat("Object").join("X");!s.enabled&&h in globalThis&&(t=function(){try{return new globalThis[h]("Microsoft.XMLHTTP")}catch{return null}},s.enabled=!!new t);var c=!1;try{c="withCredentials"in new t}catch{}return s.supportsCORS=c,we=s,we}var _e,kt;function se(){if(kt)return _e;kt=1;var u=O(),e=kr();function o(i,t,l,s){e.call(this,i,t,l,s)}return u(o,e),o.enabled=e.enabled&&e.supportsCORS,_e=o,_e}var Ee,Nt;function V(){if(Nt)return Ee;Nt=1;var u=O(),e=kr();function o(i,t,l){e.call(this,i,t,l,{noCredentials:!0})}return u(o,e),o.enabled=e.enabled,Ee=o,Ee}var Te,At;function Q(){return At||(At=1,Te={isOpera:function(){return globalThis.navigator&&/opera/i.test(globalThis.navigator.userAgent)},isKonqueror:function(){return globalThis.navigator&&/konqueror/i.test(globalThis.navigator.userAgent)},hasDomain:function(){if(!globalThis.document)return!0;try{return!!globalThis.document.domain}catch{return!1}}}),Te}var xe,jt;function rn(){if(jt)return xe;jt=1;var u=O(),e=J(),o=oe(),i=se(),t=V(),l=Q();function s(h){if(!t.enabled&&!i.enabled)throw new Error("Transport created when disabled");e.call(this,h,"/xhr_streaming",o,i)}return u(s,e),s.enabled=function(h){return h.nullOrigin||l.isOpera()?!1:i.enabled},s.transportName="xhr-streaming",s.roundTrips=2,s.needBody=!!globalThis.document,xe=s,xe}var Se,Pt;function lt(){if(Pt)return Se;Pt=1;var u=L().EventEmitter,e=O(),o=W(),i=Q(),t=M(),l=function(){};function s(h,c,n){var r=this;u.call(this),setTimeout(function(){r._start(h,c,n)},0)}return e(s,u),s.prototype._start=function(h,c,n){var r=this,a=new globalThis.XDomainRequest;c=t.addQuery(c,"t="+ +new Date),a.onerror=function(){r._error()},a.ontimeout=function(){r._error()},a.onprogress=function(){l("progress",a.responseText),r.emit("chunk",200,a.responseText)},a.onload=function(){r.emit("finish",200,a.responseText),r._cleanup(!1)},this.xdr=a,this.unloadRef=o.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(h,c),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch{this._error()}},s.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},s.prototype._cleanup=function(h){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,h)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!(globalThis.XDomainRequest&&i.hasDomain()),Se=s,Se}var Re,Lt;function Nr(){if(Lt)return Re;Lt=1;var u=O(),e=J(),o=oe(),i=lt();function t(l){if(!i.enabled)throw new Error("Transport created when disabled");e.call(this,l,"/xhr_streaming",o,i)}return u(t,e),t.enabled=function(l){return l.cookie_needed||l.nullOrigin?!1:i.enabled&&l.sameScheme},t.transportName="xdr-streaming",t.roundTrips=2,Re=t,Re}var Ie,Ut;function Ar(){return Ut||(Ut=1,Ie=globalThis.EventSource),Ie}var Ce,Bt;function nn(){if(Bt)return Ce;Bt=1;var u=O(),e=L().EventEmitter,o=Ar(),i=function(){};function t(l){e.call(this);var s=this,h=this.es=new o(l);h.onmessage=function(c){i("message",c.data),s.emit("message",decodeURI(c.data))},h.onerror=function(c){i("error",h.readyState);var n=h.readyState!==2?"network":"permanent";s._cleanup(),s._close(n)}}return u(t,e),t.prototype.abort=function(){this._cleanup(),this._close("user")},t.prototype._cleanup=function(){var l=this.es;l&&(l.onmessage=l.onerror=null,l.close(),this.es=null)},t.prototype._close=function(l){var s=this;setTimeout(function(){s.emit("close",null,l),s.removeAllListeners()},200)},Ce=t,Ce}var qe,Mt;function Xt(){if(Mt)return qe;Mt=1;var u=O(),e=J(),o=nn(),i=se(),t=Ar();function l(s){if(!l.enabled())throw new Error("Transport created when disabled");e.call(this,s,"/eventsource",o,i)}return u(l,e),l.enabled=function(){return!!t},l.transportName="eventsource",l.roundTrips=2,qe=l,qe}var Oe,Wt;function jr(){return Wt||(Wt=1,Oe="1.6.1"),Oe}var ke={exports:{}},Dt;function Y(){return Dt||(Dt=1,(function(u){var e=W(),o=Q();u.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){u.exports.WPrefix in globalThis||(globalThis[u.exports.WPrefix]={})},postMessage:function(i,t){globalThis.parent!==globalThis&&globalThis.parent.postMessage(JSON.stringify({windowId:u.exports.currentWindowId,type:i,data:t||""}),"*")},createIframe:function(i,t){var l=globalThis.document.createElement("iframe"),s,h,c=function(){clearTimeout(s);try{l.onload=null}catch{}l.onerror=null},n=function(){l&&(c(),setTimeout(function(){l&&l.parentNode.removeChild(l),l=null},0),e.unloadDel(h))},r=function(p){l&&(n(),t(p))},a=function(p,b){setTimeout(function(){try{l&&l.contentWindow&&l.contentWindow.postMessage(p,b)}catch{}},0)};return l.src=i,l.style.display="none",l.style.position="absolute",l.onerror=function(){r("onerror")},l.onload=function(){clearTimeout(s),s=setTimeout(function(){r("onload timeout")},2e3)},globalThis.document.body.appendChild(l),s=setTimeout(function(){r("timeout")},15e3),h=e.unloadAdd(n),{post:a,cleanup:n,loaded:c}},createHtmlfile:function(i,t){var l=["Active"].concat("Object").join("X"),s=new globalThis[l]("htmlfile"),h,c,n,r=function(){clearTimeout(h),n.onerror=null},a=function(){s&&(r(),e.unloadDel(c),n.parentNode.removeChild(n),n=s=null,CollectGarbage())},p=function(S){s&&(a(),t(S))},b=function(S,I){try{setTimeout(function(){n&&n.contentWindow&&n.contentWindow.postMessage(S,I)},0)}catch{}};s.open(),s.write('<html><script>document.domain="'+globalThis.document.domain+'";<\/script></html>'),s.close(),s.parentWindow[u.exports.WPrefix]=globalThis[u.exports.WPrefix];var R=s.createElement("div");return s.body.appendChild(R),n=s.createElement("iframe"),R.appendChild(n),n.src=i,n.onerror=function(){p("onerror")},h=setTimeout(function(){p("timeout")},15e3),c=e.unloadAdd(a),{post:b,cleanup:a,loaded:r}}},u.exports.iframeEnabled=!1,globalThis.document&&(u.exports.iframeEnabled=(typeof globalThis.postMessage=="function"||typeof globalThis.postMessage=="object")&&!o.isKonqueror())})(ke)),ke.exports}var Ne,Ft;function Pr(){if(Ft)return Ne;Ft=1;var u=O(),e=L().EventEmitter,o=jr(),i=M(),t=Y(),l=W(),s=H(),h=function(){};function c(n,r,a){if(!c.enabled())throw new Error("Transport created when disabled");e.call(this);var p=this;this.origin=i.getOrigin(a),this.baseUrl=a,this.transUrl=r,this.transport=n,this.windowId=s.string(8);var b=i.addPath(a,"/iframe.html")+"#"+this.windowId;this.iframeObj=t.createIframe(b,function(R){p.emit("close",1006,"Unable to load an iframe ("+R+")"),p.close()}),this.onmessageCallback=this._message.bind(this),l.attachEvent("message",this.onmessageCallback)}return u(c,e),c.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){l.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},c.prototype._message=function(n){if(h("message",n.data),!i.isOriginEqual(n.origin,this.origin)){h("not same origin",n.origin,this.origin);return}var r;try{r=JSON.parse(n.data)}catch{h("bad json",n.data);return}if(r.windowId!==this.windowId){h("mismatched window id",r.windowId,this.windowId);return}switch(r.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",r.data);break;case"c":var a;try{a=JSON.parse(r.data)}catch{h("bad json",r.data);return}this.emit("close",a[0],a[1]),this.close();break}},c.prototype.postMessage=function(n,r){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:n,data:r||""}),this.origin)},c.prototype.send=function(n){this.postMessage("m",n)},c.enabled=function(){return t.iframeEnabled},c.transportName="iframe",c.roundTrips=2,Ne=c,Ne}var Ae,$t;function ct(){return $t||($t=1,Ae={isObject:function(u){var e=typeof u;return e==="function"||e==="object"&&!!u},extend:function(u){if(!this.isObject(u))return u;for(var e,o,i=1,t=arguments.length;i<t;i++){e=arguments[i];for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(u[o]=e[o])}return u}}),Ae}var je,Ht;function Pe(){if(Ht)return je;Ht=1;var u=O(),e=Pr(),o=ct();return je=function(i){function t(l,s){e.call(this,i.transportName,l,s)}return u(t,e),t.enabled=function(l,s){if(!globalThis.document)return!1;var h=o.extend({},s);return h.sameOrigin=!0,i.enabled(h)&&e.enabled()},t.transportName="iframe-"+i.transportName,t.needBody=!0,t.roundTrips=e.roundTrips+i.roundTrips-1,t.facadeTransport=i,t},je}var Le,Jt;function on(){if(Jt)return Le;Jt=1;var u=O(),e=Y(),o=M(),i=L().EventEmitter,t=H(),l=function(){};function s(c){i.call(this);var n=this;e.polluteGlobalNamespace(),this.id="a"+t.string(6),c=o.addQuery(c,"c="+decodeURIComponent(e.WPrefix+"."+this.id)),l("using htmlfile",s.htmlfileEnabled);var r=s.htmlfileEnabled?e.createHtmlfile:e.createIframe;globalThis[e.WPrefix][this.id]={start:function(){n.iframeObj.loaded()},message:function(a){n.emit("message",a)},stop:function(){n._cleanup(),n._close("network")}},this.iframeObj=r(c,function(){n._cleanup(),n._close("permanent")})}u(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete globalThis[e.WPrefix][this.id]},s.prototype._close=function(c){this.emit("close",null,c),this.removeAllListeners()},s.htmlfileEnabled=!1;var h=["Active"].concat("Object").join("X");if(h in globalThis)try{s.htmlfileEnabled=!!new globalThis[h]("htmlfile")}catch{}return s.enabled=s.htmlfileEnabled||e.iframeEnabled,Le=s,Le}var Ue,Gt;function zt(){if(Gt)return Ue;Gt=1;var u=O(),e=on(),o=V(),i=J();function t(l){if(!e.enabled)throw new Error("Transport created when disabled");i.call(this,l,"/htmlfile",e,o)}return u(t,i),t.enabled=function(l){return e.enabled&&l.sameOrigin},t.transportName="htmlfile",t.roundTrips=2,Ue=t,Ue}var Be,Vt;function Qt(){if(Vt)return Be;Vt=1;var u=O(),e=J(),o=oe(),i=se(),t=V();function l(s){if(!t.enabled&&!i.enabled)throw new Error("Transport created when disabled");e.call(this,s,"/xhr",o,i)}return u(l,e),l.enabled=function(s){return s.nullOrigin?!1:t.enabled&&s.sameOrigin?!0:i.enabled},l.transportName="xhr-polling",l.roundTrips=2,Be=l,Be}var Me,Yt;function sn(){if(Yt)return Me;Yt=1;var u=O(),e=J(),o=Nr(),i=oe(),t=lt();function l(s){if(!t.enabled)throw new Error("Transport created when disabled");e.call(this,s,"/xhr",i,t)}return u(l,e),l.enabled=o.enabled,l.transportName="xdr-polling",l.roundTrips=2,Me=l,Me}var Xe,Kt;function an(){if(Kt)return Xe;Kt=1;var u=Y(),e=H(),o=Q(),i=M(),t=O(),l=L().EventEmitter,s=function(){};function h(c){var n=this;l.call(this),u.polluteGlobalNamespace(),this.id="a"+e.string(6);var r=i.addQuery(c,"c="+encodeURIComponent(u.WPrefix+"."+this.id));globalThis[u.WPrefix][this.id]=this._callback.bind(this),this._createScript(r),this.timeoutId=setTimeout(function(){n._abort(new Error("JSONP script loaded abnormally (timeout)"))},h.timeout)}return t(h,l),h.prototype.abort=function(){if(globalThis[u.WPrefix][this.id]){var c=new Error("JSONP user aborted read");c.code=1e3,this._abort(c)}},h.timeout=35e3,h.scriptErrorTimeout=1e3,h.prototype._callback=function(c){this._cleanup(),!this.aborting&&(c&&this.emit("message",c),this.emit("close",null,"network"),this.removeAllListeners())},h.prototype._abort=function(c){this._cleanup(),this.aborting=!0,this.emit("close",c.code,c.message),this.removeAllListeners()},h.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var c=this.script;c.parentNode.removeChild(c),c.onreadystatechange=c.onerror=c.onload=c.onclick=null,this.script=null}delete globalThis[u.WPrefix][this.id]},h.prototype._scriptError=function(){var c=this;this.errorTimer||(this.errorTimer=setTimeout(function(){c.loadedOkay||c._abort(new Error("JSONP script loaded abnormally (onerror)"))},h.scriptErrorTimeout))},h.prototype._createScript=function(c){var n=this,r=this.script=globalThis.document.createElement("script"),a;if(r.id="a"+e.string(8),r.src=c,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){n._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(s("onreadystatechange",r.readyState),/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){n.loadedOkay=!0;try{r.onclick()}catch{}}r&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof r.async>"u"&&globalThis.document.attachEvent)if(o.isOpera())a=this.script2=globalThis.document.createElement("script"),a.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=a.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch{}r.async=!0}typeof r.async<"u"&&(r.async=!0);var p=globalThis.document.getElementsByTagName("head")[0];p.insertBefore(r,p.firstChild),a&&p.insertBefore(a,p.firstChild)},Xe=h,Xe}var We,Zt;function un(){if(Zt)return We;Zt=1;var u=H(),e=M(),o=function(){},i,t;function l(h){try{return globalThis.document.createElement('<iframe name="'+h+'">')}catch{var c=globalThis.document.createElement("iframe");return c.name=h,c}}function s(){i=globalThis.document.createElement("form"),i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",t=globalThis.document.createElement("textarea"),t.name="d",i.appendChild(t),globalThis.document.body.appendChild(i)}return We=function(h,c,n){i||s();var r="a"+u.string(8);i.target=r,i.action=e.addQuery(e.addPath(h,"/jsonp_send"),"i="+r);var a=l(r);a.id=r,a.style.display="none",i.appendChild(a);try{t.value=c}catch{}i.submit();var p=function(b){a.onerror&&(a.onreadystatechange=a.onerror=a.onload=null,setTimeout(function(){a.parentNode.removeChild(a),a=null},500),t.value="",n(b))};return a.onerror=function(){p()},a.onload=function(){p()},a.onreadystatechange=function(b){o("onreadystatechange",r,a.readyState),a.readyState==="complete"&&p()},function(){p(new Error("Aborted"))}},We}var De,er;function ln(){if(er)return De;er=1;var u=O(),e=Or(),o=an(),i=un();function t(l){if(!t.enabled())throw new Error("Transport created when disabled");e.call(this,l,"/jsonp",i,o)}return u(t,e),t.enabled=function(){return!!globalThis.document},t.transportName="jsonp-polling",t.roundTrips=1,t.needBody=!0,De=t,De}var Fe,tr;function cn(){return tr||(tr=1,Fe=[Zr(),rn(),Nr(),Xt(),Pe()(Xt()),zt(),Pe()(zt()),Qt(),sn(),Pe()(Qt()),ln()]),Fe}var rr={},nr;function fn(){if(nr)return rr;nr=1;var u=Array.prototype,e=Object.prototype,o=Function.prototype,i=String.prototype,t=u.slice,l=e.toString,s=function(g){return e.toString.call(g)==="[object Function]"},h=function(v){return l.call(v)==="[object Array]"},c=function(v){return l.call(v)==="[object String]"},n=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),r;n?r=function(g,v,y,T){!T&&v in g||Object.defineProperty(g,v,{configurable:!0,enumerable:!1,writable:!0,value:y})}:r=function(g,v,y,T){!T&&v in g||(g[v]=y)};var a=function(g,v,y){for(var T in v)e.hasOwnProperty.call(v,T)&&r(g,T,v[T],y)},p=function(g){if(g==null)throw new TypeError("can't convert "+g+" to object");return Object(g)};function b(g){var v=+g;return v!==v?v=0:v!==0&&v!==1/0&&v!==-1/0&&(v=(v>0||-1)*Math.floor(Math.abs(v))),v}function R(g){return g>>>0}function S(){}a(o,{bind:function(v){var y=this;if(!s(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var T=t.call(arguments,1),x=function(){if(this instanceof A){var X=y.apply(this,T.concat(t.call(arguments)));return Object(X)===X?X:this}else return y.apply(v,T.concat(t.call(arguments)))},q=Math.max(0,y.length-T.length),E=[],j=0;j<q;j++)E.push("$"+j);var A=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this, arguments); }")(x);return y.prototype&&(S.prototype=y.prototype,A.prototype=new S,S.prototype=null),A}}),a(Array,{isArray:h});var I=Object("a"),C=I[0]!=="a"||!(0 in I),m=function(v){var y=!0,T=!0;return v&&(v.call("foo",function(x,q,E){typeof E!="object"&&(y=!1)}),v.call([1],function(){T=typeof this=="string"},"x")),!!v&&y&&T};a(u,{forEach:function(v){var y=p(this),T=C&&c(this)?this.split(""):y,x=arguments[1],q=-1,E=T.length>>>0;if(!s(v))throw new TypeError;for(;++q<E;)q in T&&v.call(x,T[q],q,y)}},!m(u.forEach));var w=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;a(u,{indexOf:function(v){var y=C&&c(this)?this.split(""):p(this),T=y.length>>>0;if(!T)return-1;var x=0;for(arguments.length>1&&(x=b(arguments[1])),x=x>=0?x:Math.max(0,T+x);x<T;x++)if(x in y&&y[x]===v)return x;return-1}},w);var f=i.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var g=/()??/.exec("")[1]===void 0;i.split=function(v,y){var T=this;if(v===void 0&&y===0)return[];if(l.call(v)!=="[object RegExp]")return f.call(this,v,y);var x=[],q=(v.ignoreCase?"i":"")+(v.multiline?"m":"")+(v.extended?"x":"")+(v.sticky?"y":""),E=0,j,A,X,ht;for(v=new RegExp(v.source,q+"g"),T+="",g||(j=new RegExp("^"+v.source+"$(?!\\s)",q)),y=y===void 0?-1>>>0:R(y);(A=v.exec(T))&&(X=A.index+A[0].length,!(X>E&&(x.push(T.slice(E,A.index)),!g&&A.length>1&&A[0].replace(j,function(){for(var K=1;K<arguments.length-2;K++)arguments[K]===void 0&&(A[K]=void 0)}),A.length>1&&A.index<T.length&&u.push.apply(x,A.slice(1)),ht=A[0].length,E=X,x.length>=y)));)v.lastIndex===A.index&&v.lastIndex++;return E===T.length?(ht||!v.test(""))&&x.push(""):x.push(T.slice(E)),x.length>y?x.slice(0,y):x}})():"0".split(void 0,0).length&&(i.split=function(v,y){return v===void 0&&y===0?[]:f.call(this,v,y)});var d=i.substr,_="".substr&&"0b".substr(-1)!=="b";return a(i,{substr:function(v,y){return d.call(this,v<0&&(v=this.length+v)<0?0:v,y)}},_),rr}var $e,ir;function hn(){if(ir)return $e;ir=1;var u=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,e,o=function(i){var t,l={},s=[];for(t=0;t<65536;t++)s.push(String.fromCharCode(t));return i.lastIndex=0,s.join("").replace(i,function(h){return l[h]="\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4),""}),i.lastIndex=0,l};return $e={quote:function(i){var t=JSON.stringify(i);return u.lastIndex=0,u.test(t)?(e||(e=o(u)),t.replace(u,function(l){return e[l]})):t}},$e}var He,or;function dn(){if(or)return He;or=1;var u=function(){};return He=function(e){return{filterToEnabled:function(o,i){var t={main:[],facade:[]};return o?typeof o=="string"&&(o=[o]):o=[],e.forEach(function(l){if(l&&!(l.transportName==="websocket"&&i.websocket===!1)){if(o.length&&o.indexOf(l.transportName)===-1){u("not in whitelist",l.transportName);return}l.enabled(i)?(u("enabled",l.transportName),t.main.push(l),l.facadeTransport&&t.facade.push(l.facadeTransport)):u("disabled",l.transportName)}}),t}}},He}var Je,sr;function pn(){if(sr)return Je;sr=1;var u={};return["log","debug","warn"].forEach(function(e){var o;try{o=globalThis.console&&globalThis.console[e]&&globalThis.console[e].apply}catch{}u[e]=o?function(){return globalThis.console[e].apply(globalThis.console,arguments)}:e==="log"?function(){}:u.log}),Je=u,Je}var Ge,ar;function ft(){if(ar)return Ge;ar=1;function u(e){this.type=e}return u.prototype.initEvent=function(e,o,i){return this.type=e,this.bubbles=o,this.cancelable=i,this.timeStamp=+new Date,this},u.prototype.stopPropagation=function(){},u.prototype.preventDefault=function(){},u.CAPTURING_PHASE=1,u.AT_TARGET=2,u.BUBBLING_PHASE=3,Ge=u,Ge}var ze,ur;function Lr(){return ur||(ur=1,ze=globalThis.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),ze}var Ve,lr;function vn(){if(lr)return Ve;lr=1;var u=O(),e=ft();function o(){e.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return u(o,e),Ve=o,Ve}var Qe,cr;function mn(){if(cr)return Qe;cr=1;var u=O(),e=ft();function o(i){e.call(this),this.initEvent("message",!1,!1),this.data=i}return u(o,e),Qe=o,Qe}var Ye,fr;function gn(){if(fr)return Ye;fr=1;var u=L().EventEmitter,e=O();function o(){var i=this;u.call(this),this.to=setTimeout(function(){i.emit("finish",200,"{}")},o.timeout)}return e(o,u),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,Ye=o,Ye}var Ke,hr;function Ur(){if(hr)return Ke;hr=1;var u=L().EventEmitter,e=O(),o=ct();function i(t,l){u.call(this);var s=this,h=+new Date;this.xo=new l("GET",t),this.xo.once("finish",function(c,n){var r,a;if(c===200){if(a=+new Date-h,n)try{r=JSON.parse(n)}catch{}o.isObject(r)||(r={})}s.emit("finish",r,a),s.removeAllListeners()})}return e(i,u),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},Ke=i,Ke}var Ze,dr;function Br(){if(dr)return Ze;dr=1;var u=O(),e=L().EventEmitter,o=V(),i=Ur();function t(l){var s=this;e.call(this),this.ir=new i(l,o),this.ir.once("finish",function(h,c){s.ir=null,s.emit("message",JSON.stringify([h,c]))})}return u(t,e),t.transportName="iframe-info-receiver",t.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},Ze=t,Ze}var et,pr;function bn(){if(pr)return et;pr=1;var u=L().EventEmitter,e=O(),o=W(),i=Pr(),t=Br();function l(s,h){var c=this;u.call(this);var n=function(){var r=c.ifr=new i(t.transportName,h,s);r.once("message",function(a){if(a){var p;try{p=JSON.parse(a)}catch{c.emit("finish"),c.close();return}var b=p[0],R=p[1];c.emit("finish",b,R)}c.close()}),r.once("close",function(){c.emit("finish"),c.close()})};globalThis.document.body?n():o.attachEvent("load",n)}return e(l,u),l.enabled=function(){return i.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},et=l,et}var tt,vr;function yn(){if(vr)return tt;vr=1;var u=L().EventEmitter,e=O(),o=M(),i=lt(),t=se(),l=V(),s=gn(),h=bn(),c=Ur();function n(r,a){var p=this;u.call(this),setTimeout(function(){p.doXhr(r,a)},0)}return e(n,u),n._getReceiver=function(r,a,p){return p.sameOrigin?new c(a,l):t.enabled?new c(a,t):i.enabled&&p.sameScheme?new c(a,i):h.enabled()?new h(r,a):new c(a,s)},n.prototype.doXhr=function(r,a){var p=this,b=o.addPath(r,"/info");this.xo=n._getReceiver(r,b,a),this.timeoutRef=setTimeout(function(){p._cleanup(!1),p.emit("finish")},n.timeout),this.xo.once("finish",function(R,S){p._cleanup(!0),p.emit("finish",R,S)})},n.prototype._cleanup=function(r){clearTimeout(this.timeoutRef),this.timeoutRef=null,!r&&this.xo&&this.xo.close(),this.xo=null},n.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},n.timeout=8e3,tt=n,tt}var rt,mr;function wn(){if(mr)return rt;mr=1;var u=Y();function e(o){this._transport=o,o.on("message",this._transportMessage.bind(this)),o.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(o,i){u.postMessage("c",JSON.stringify([o,i]))},e.prototype._transportMessage=function(o){u.postMessage("t",o)},e.prototype._send=function(o){this._transport.send(o)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},rt=e,rt}var nt,gr;function _n(){if(gr)return nt;gr=1;var u=M(),e=W(),o=wn(),i=Br(),t=Y(),l=Lr(),s=function(){};return nt=function(h,c){var n={};c.forEach(function(a){a.facadeTransport&&(n[a.facadeTransport.transportName]=a.facadeTransport)}),n[i.transportName]=i;var r;h.bootstrap_iframe=function(){var a;t.currentWindowId=l.hash.slice(1);var p=function(b){if(b.source===parent&&(typeof r>"u"&&(r=b.origin),b.origin===r)){var R;try{R=JSON.parse(b.data)}catch{s("bad json",b.data);return}if(R.windowId===t.currentWindowId)switch(R.type){case"s":var S;try{S=JSON.parse(R.data)}catch{s("bad json",R.data);break}var I=S[0],C=S[1],m=S[2],w=S[3];if(I!==h.version)throw new Error('Incompatible SockJS! Main site uses: "'+I+'", the iframe: "'+h.version+'".');if(!u.isOriginEqual(m,l.href)||!u.isOriginEqual(w,l.href))throw new Error("Can't connect to different domain from within an iframe. ("+l.href+", "+m+", "+w+")");a=new o(new n[C](m,w));break;case"m":a._send(R.data);break;case"c":a&&a._close(),a=null;break}}};e.attachEvent("message",p),t.postMessage("s")}},nt}var it,br;function En(){if(br)return it;br=1,fn();var u=Cr(),e=O(),o=H(),i=hn(),t=M(),l=W(),s=dn(),h=ct(),c=Q(),n=pn(),r=ft(),a=qr(),p=Lr(),b=vn(),R=mn(),S=yn(),I=function(){},C;function m(f,d,_){if(!(this instanceof m))return new m(f,d,_);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");a.call(this),this.readyState=m.CONNECTING,this.extensions="",this.protocol="",_=_||{},_.protocols_whitelist&&n.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=_.transports,this._transportOptions=_.transportOptions||{},this._timeout=_.timeout||0;var g=_.sessionId||8;if(typeof g=="function")this._generateSessionId=g;else if(typeof g=="number")this._generateSessionId=function(){return o.string(g)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=_.server||o.numberString(1e3);var v=new u(f);if(!v.host||!v.protocol)throw new SyntaxError("The URL '"+f+"' is invalid");if(v.hash)throw new SyntaxError("The URL must not contain a fragment");if(v.protocol!=="http:"&&v.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+v.protocol+"' is not allowed.");var y=v.protocol==="https:";if(p.protocol==="https:"&&!y&&!t.isLoopbackAddr(v.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");d?Array.isArray(d)||(d=[d]):d=[];var T=d.sort();T.forEach(function(q,E){if(!q)throw new SyntaxError("The protocols entry '"+q+"' is invalid.");if(E<T.length-1&&q===T[E+1])throw new SyntaxError("The protocols entry '"+q+"' is duplicated.")});var x=t.getOrigin(p.href);this._origin=x?x.toLowerCase():null,v.set("pathname",v.pathname.replace(/\/+$/,"")),this.url=v.href,I("using url",this.url),this._urlInfo={nullOrigin:!c.hasDomain(),sameOrigin:t.isOriginEqual(this.url,p.href),sameScheme:t.isSchemeEqual(this.url,p.href)},this._ir=new S(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}e(m,a);function w(f){return f===1e3||f>=3e3&&f<=4999}return m.prototype.close=function(f,d){if(f&&!w(f))throw new Error("InvalidAccessError: Invalid code");if(d&&d.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===m.CLOSING||this.readyState===m.CLOSED)){var _=!0;this._close(f||1e3,d||"Normal closure",_)}},m.prototype.send=function(f){if(typeof f!="string"&&(f=""+f),this.readyState===m.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===m.OPEN&&this._transport.send(i.quote(f))},m.version=jr(),m.CONNECTING=0,m.OPEN=1,m.CLOSING=2,m.CLOSED=3,m.prototype._receiveInfo=function(f,d){if(this._ir=null,!f){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(d),this._transUrl=f.base_url?f.base_url:this.url,f=h.extend(f,this._urlInfo);var _=C.filterToEnabled(this._transportsWhitelist,f);this._transports=_.main,I(this._transports.length+" enabled transports"),this._connect()},m.prototype._connect=function(){for(var f=this._transports.shift();f;f=this._transports.shift()){if(I("attempt",f.transportName),f.needBody&&(!globalThis.document.body||typeof globalThis.document.readyState<"u"&&globalThis.document.readyState!=="complete"&&globalThis.document.readyState!=="interactive")){this._transports.unshift(f),l.attachEvent("load",this._connect.bind(this));return}var d=Math.max(this._timeout,this._rto*f.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),d);var _=t.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),g=this._transportOptions[f.transportName],v=new f(_,this._transUrl,g);v.on("message",this._transportMessage.bind(this)),v.once("close",this._transportClose.bind(this)),v.transportName=f.transportName,this._transport=v;return}this._close(2e3,"All transports failed",!1)},m.prototype._transportTimeout=function(){this.readyState===m.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},m.prototype._transportMessage=function(f){var d=this,_=f.slice(0,1),g=f.slice(1),v;switch(_){case"o":this._open();return;case"h":this.dispatchEvent(new r("heartbeat")),I("heartbeat",this.transport);return}if(g)try{v=JSON.parse(g)}catch{}if(!(typeof v>"u"))switch(_){case"a":Array.isArray(v)&&v.forEach(function(y){I("message",d.transport),d.dispatchEvent(new R(y))});break;case"m":I("message",this.transport),this.dispatchEvent(new R(v));break;case"c":Array.isArray(v)&&v.length===2&&this._close(v[0],v[1],!0);break}},m.prototype._transportClose=function(f,d){if(I("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!w(f)&&f!==2e3&&this.readyState===m.CONNECTING){this._connect();return}this._close(f,d)},m.prototype._open=function(){I("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===m.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=m.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new r("open")),I("connected",this.transport)):this._close(1006,"Server lost session")},m.prototype._close=function(f,d,_){I("_close",this.transport,f,d,_,this.readyState);var g=!1;if(this._ir&&(g=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===m.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=m.CLOSING,setTimeout((function(){this.readyState=m.CLOSED,g&&this.dispatchEvent(new r("error"));var v=new b("close");v.wasClean=_||!1,v.code=f||1e3,v.reason=d,this.dispatchEvent(v),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},m.prototype.countRTO=function(f){return f>100?4*f:300+f},it=function(f){return C=s(f),_n()(m,f),m},it}var ot,yr;function Tn(){if(yr)return ot;yr=1;var u=cn();return ot=En()(u),"_sockjs_onload"in globalThis&&setTimeout(globalThis._sockjs_onload,1),ot}var xn=Tn();const Sn=Rr(xn);var G={exports:{}},ne={},wr;function Mr(){return wr||(wr=1,(function(u){(function(){var e,o,i,t,l={}.hasOwnProperty,s=[].slice;e={LF:`
`,NULL:"\0"},i=(function(){var h;function c(n,r,a){this.command=n,this.headers=r??{},this.body=a??""}return c.prototype.toString=function(){var n,r,a,p,b;n=[this.command],a=this.headers["content-length"]===!1,a&&delete this.headers["content-length"],b=this.headers;for(r in b)l.call(b,r)&&(p=b[r],n.push(""+r+":"+p));return this.body&&!a&&n.push("content-length:"+c.sizeOfUTF8(this.body)),n.push(e.LF+this.body),n.join(e.LF)},c.sizeOfUTF8=function(n){return n?encodeURI(n).match(/%..|./g).length:0},h=function(n){var r,a,p,b,R,S,I,C,m,w,f,d,_,g,v,y,T;for(b=n.search(RegExp(""+e.LF+e.LF)),R=n.substring(0,b).split(e.LF),p=R.shift(),S={},d=function(x){return x.replace(/^\s+|\s+$/g,"")},y=R.reverse(),_=0,v=y.length;_<v;_++)w=y[_],C=w.indexOf(":"),S[d(w.substring(0,C))]=d(w.substring(C+1));if(r="",f=b+2,S["content-length"])m=parseInt(S["content-length"]),r=(""+n).substring(f,f+m);else for(a=null,I=g=f,T=n.length;(f<=T?g<T:g>T)&&(a=n.charAt(I),a!==e.NULL);I=f<=T?++g:--g)r+=a;return new c(p,S,r)},c.unmarshall=function(n){var r;return(function(){var a,p,b,R;for(b=n.split(RegExp(""+e.NULL+e.LF+"*")),R=[],a=0,p=b.length;a<p;a++)r=b[a],(r!=null?r.length:void 0)>0&&R.push(h(r));return R})()},c.marshall=function(n,r,a){var p;return p=new c(n,r,a),p.toString()+e.NULL},c})(),o=(function(){var h;function c(n){this.ws=n,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return c.prototype.debug=function(n){var r;return typeof window<"u"&&window!==null&&(r=window.console)!=null?r.log(n):void 0},h=function(){return Date.now?Date.now():new Date().valueOf},c.prototype._transmit=function(n,r,a){var p;for(p=i.marshall(n,r,a),typeof this.debug=="function"&&this.debug(">>> "+p);;)if(p.length>this.maxWebSocketFrameSize)this.ws.send(p.substring(0,this.maxWebSocketFrameSize)),p=p.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+p.length);else return this.ws.send(p)},c.prototype._setupHeartbeat=function(n){var r,a,p,b,R,S;if(!((R=n.version)!==t.VERSIONS.V1_1&&R!==t.VERSIONS.V1_2)&&(S=(function(){var I,C,m,w;for(m=n["heart-beat"].split(","),w=[],I=0,C=m.length;I<C;I++)b=m[I],w.push(parseInt(b));return w})(),a=S[0],r=S[1],this.heartbeat.outgoing===0||r===0||(p=Math.max(this.heartbeat.outgoing,r),typeof this.debug=="function"&&this.debug("send PING every "+p+"ms"),this.pinger=t.setInterval(p,(function(I){return function(){return I.ws.send(e.LF),typeof I.debug=="function"?I.debug(">>> PING"):void 0}})(this))),!(this.heartbeat.incoming===0||a===0)))return p=Math.max(this.heartbeat.incoming,a),typeof this.debug=="function"&&this.debug("check PONG every "+p+"ms"),this.ponger=t.setInterval(p,(function(I){return function(){var C;if(C=h()-I.serverActivity,C>p*2)return typeof I.debug=="function"&&I.debug("did not receive server activity for the last "+C+"ms"),I.ws.close()}})(this))},c.prototype._parseConnect=function(){var n,r,a,p;switch(n=1<=arguments.length?s.call(arguments,0):[],p={},n.length){case 2:p=n[0],r=n[1];break;case 3:n[1]instanceof Function?(p=n[0],r=n[1],a=n[2]):(p.login=n[0],p.passcode=n[1],r=n[2]);break;case 4:p.login=n[0],p.passcode=n[1],r=n[2],a=n[3];break;default:p.login=n[0],p.passcode=n[1],r=n[2],a=n[3],p.host=n[4]}return[p,r,a]},c.prototype.connect=function(){var n,r,a,p;return n=1<=arguments.length?s.call(arguments,0):[],p=this._parseConnect.apply(this,n),a=p[0],this.connectCallback=p[1],r=p[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=(function(b){return function(R){var S,I,C,m,w,f,d,_,g,v,y,T;if(m=typeof ArrayBuffer<"u"&&R.data instanceof ArrayBuffer?(S=new Uint8Array(R.data),typeof b.debug=="function"&&b.debug("--- got data length: "+S.length),(function(){var x,q,E;for(E=[],x=0,q=S.length;x<q;x++)I=S[x],E.push(String.fromCharCode(I));return E})().join("")):R.data,b.serverActivity=h(),m===e.LF){typeof b.debug=="function"&&b.debug("<<< PONG");return}for(typeof b.debug=="function"&&b.debug("<<< "+m),y=i.unmarshall(m),T=[],g=0,v=y.length;g<v;g++)switch(w=y[g],w.command){case"CONNECTED":typeof b.debug=="function"&&b.debug("connected to server "+w.headers.server),b.connected=!0,b._setupHeartbeat(w.headers),T.push(typeof b.connectCallback=="function"?b.connectCallback(w):void 0);break;case"MESSAGE":_=w.headers.subscription,d=b.subscriptions[_]||b.onreceive,d?(C=b,f=w.headers["message-id"],w.ack=function(x){return x==null&&(x={}),C.ack(f,_,x)},w.nack=function(x){return x==null&&(x={}),C.nack(f,_,x)},T.push(d(w))):T.push(typeof b.debug=="function"?b.debug("Unhandled received MESSAGE: "+w):void 0);break;case"RECEIPT":T.push(typeof b.onreceipt=="function"?b.onreceipt(w):void 0);break;case"ERROR":T.push(typeof r=="function"?r(w):void 0);break;default:T.push(typeof b.debug=="function"?b.debug("Unhandled frame: "+w):void 0)}return T}})(this),this.ws.onclose=(function(b){return function(){var R;return R="Whoops! Lost connection to "+b.ws.url,typeof b.debug=="function"&&b.debug(R),b._cleanUp(),typeof r=="function"?r(R):void 0}})(this),this.ws.onopen=(function(b){return function(){return typeof b.debug=="function"&&b.debug("Web Socket Opened..."),a["accept-version"]=t.VERSIONS.supportedVersions(),a["heart-beat"]=[b.heartbeat.outgoing,b.heartbeat.incoming].join(","),b._transmit("CONNECT",a)}})(this)},c.prototype.disconnect=function(n,r){return r==null&&(r={}),this._transmit("DISCONNECT",r),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof n=="function"?n():void 0},c.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&t.clearInterval(this.pinger),this.ponger)return t.clearInterval(this.ponger)},c.prototype.send=function(n,r,a){return r==null&&(r={}),a==null&&(a=""),r.destination=n,this._transmit("SEND",r,a)},c.prototype.subscribe=function(n,r,a){var p;return a==null&&(a={}),a.id||(a.id="sub-"+this.counter++),a.destination=n,this.subscriptions[a.id]=r,this._transmit("SUBSCRIBE",a),p=this,{id:a.id,unsubscribe:function(){return p.unsubscribe(a.id)}}},c.prototype.unsubscribe=function(n){return delete this.subscriptions[n],this._transmit("UNSUBSCRIBE",{id:n})},c.prototype.begin=function(n){var r,a;return a=n||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:a}),r=this,{id:a,commit:function(){return r.commit(a)},abort:function(){return r.abort(a)}}},c.prototype.commit=function(n){return this._transmit("COMMIT",{transaction:n})},c.prototype.abort=function(n){return this._transmit("ABORT",{transaction:n})},c.prototype.ack=function(n,r,a){return a==null&&(a={}),a["message-id"]=n,a.subscription=r,this._transmit("ACK",a)},c.prototype.nack=function(n,r,a){return a==null&&(a={}),a["message-id"]=n,a.subscription=r,this._transmit("NACK",a)},c})(),t={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(h,c){var n,r;return c==null&&(c=["v10.stomp","v11.stomp"]),n=t.WebSocketClass||WebSocket,r=new n(h,c),new o(r)},over:function(h){return new o(h)},Frame:i},u!==null&&(u.Stomp=t),typeof window<"u"&&window!==null?(t.setInterval=function(h,c){return window.setInterval(c,h)},t.clearInterval=function(h){return window.clearInterval(h)},window.Stomp=t):u||(self.Stomp=t)}).call(ne)})(ne)),ne}var z={};const Rn={},In=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"})),Cn=Xr(In);var st,_r;function qn(){if(_r)return st;_r=1;var u=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return st=(function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return u()}try{return __global__||u()}finally{delete Object.prototype.__global__}})(),st}const On="1.0.35",kn={version:On};var at,Er;function Nn(){return Er||(Er=1,at=kn.version),at}var ut,Tr;function An(){if(Tr)return ut;Tr=1;var u;if(typeof globalThis=="object")u=globalThis;else try{u=qn()}catch{}finally{if(!u&&typeof window<"u"&&(u=window),!u)throw new Error("Could not determine global this")}var e=u.WebSocket||u.MozWebSocket,o=Nn();function i(t,l){var s;return l?s=new e(t,l):s=new e(t),s}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(i,t,{get:function(){return e[t]}})}),ut={w3cwebsocket:e?i:null,version:o},ut}var xr;function jn(){return xr||(xr=1,(function(){var u,e,o,i,t,l;u=Mr(),e=Cn,u.Stomp.setInterval=function(s,h){return setInterval(h,s)},u.Stomp.clearInterval=function(s){return clearInterval(s)},t=function(s,h){var c,n;return c=null,n={url:"tcp:// "+h+":"+s,send:function(r){return c.write(r)},close:function(){return c.end()}},c=e.connect(s,h,function(r){return n.onopen()}),c.on("error",function(r){return typeof n.onclose=="function"?n.onclose(r):void 0}),c.on("close",function(r){return typeof n.onclose=="function"?n.onclose(r):void 0}),c.on("data",function(r){var a;return a={data:r.toString()},n.onmessage(a)}),n},l=function(s){var h,c,n,r;return h=An().client,c=null,r={url:s,send:function(a){return c.sendUTF(a)},close:function(){return c.close()}},n=new h,n.on("connect",function(a){return c=a,r.onopen(),c.on("error",function(p){return typeof r.onclose=="function"?r.onclose(p):void 0}),c.on("close",function(){return typeof r.onclose=="function"?r.onclose():void 0}),c.on("message",function(p){var b;if(p.type==="utf8")return b={data:p.utf8Data},r.onmessage(b)})}),n.connect(s),r},o=function(s,h){var c;return c=t(h,s),u.Stomp.over(c)},i=function(s){var h;return h=l(s),u.Stomp.over(h)},z.overTCP=o,z.overWS=i}).call(z)),z}var Sr;function Pn(){if(Sr)return G.exports;Sr=1;var u=Mr(),e=jn();return G.exports=u.Stomp,G.exports.overTCP=e.overTCP,G.exports.overWS=e.overWS,G.exports}var Ln=Pn();const Un=Rr(Ln);let ie=null;function Bn(u){const e=new Sn("/prod-api/ws");ie=Un.over(e),ie.connect({},o=>{console.log(" WebSocket :",o),ie.subscribe("/topic/radarInfo",i=>{const t=JSON.parse(i.body);u(t)})},o=>{console.error(" WebSocket :",o)}),ie.debug=null}function Mn(u,e){const o=[];let i,t=!1,l,s=0,h=0;function c(){s=0,h=0;const a=new MediaSource;u.src=window.URL.createObjectURL(a),a.addEventListener("sourceopen",function(){l!=null&&l.close(),l=new WebSocket(e),l.binaryType="arraybuffer",l.onopen=function(p){console.log("ws")},l.onmessage=function(p){const b=new Uint8Array(p.data);if(b[0]===9){let R;const S=b.slice(1);window.TextDecoder?R=new TextDecoder("utf-8").decode(S):R=Utf8ArrayToStr(S),i=a.addSourceBuffer('video/mp4; codecs="'+R+'"'),i.mode="segments",i.addEventListener("updateend",n)}else r(p.data)},l.onerror=function(p){console.error("WebSocket:",p)}},!1)}function n(){let a;i.updating||(o.length>0?(a=o.shift(),i.appendBuffer(a)):t=!1),u.buffered.length>0&&typeof document.hidden<"u"&&document.hidden&&(u.currentTime=u.buffered.end(u.buffered.length-1)-.5)}function r(a){if(!t){if(u.buffered.length){const p=u.buffered.end(u.buffered.length-1),b=u.currentTime;if(Math.abs(s-p)>10||Math.abs(h-b)>10){console.warn(""),c();return}s=p,h=b}i.appendBuffer(a),t=!0;return}o.push(a),i.updating||n()}c()}function Xn(){return Ir({url:"/camera/getTargetTypePY",method:"get"})}function Wn(u){return Ir({url:"/camera/followTarget",method:"get",params:u})}const Dn={class:"app-container home"},Fn={class:"box cc"},$n={style:{display:"flex","align-items":"center","font-size":"1.3rem"}},Hn={style:{width:"100%",height:"90%",display:"flex","justify-content":"center","padding-top":"2%"}},Jn={class:"box cc"},Gn={style:{display:"flex","align-items":"center","font-size":"1.3rem"}},zn={style:{width:"100%",height:"90%","padding-top":"2%"}},Vn={class:"cc",style:{width:"100%",height:"30%"}},Qn={style:{display:"flex","align-items":"center","font-size":"1.3rem"}},Yn={__name:"index",setup(u){const{proxy:e}=Dr(),{threat_level:o,target_type:i}=e.useDict("threat_level","target_type"),t=D({}),l=D(),s=D(0),h=new Map,c=D({}),n=D(),r=D(0);let a;Fr(()=>{Mn(l.value,void 0),Bn(m);const f=n.value,d=f.getBoundingClientRect();let _=d.width>d.height?d.height:d.width;f.width=_,f.height=_,f.style.width=_+"px",f.style.height=_+"px",s.value=_,R(),n.value.addEventListener("click",g=>{const v=n.value.getBoundingClientRect(),y=g.clientX-v.left-s.value/2,T=g.clientY-v.top-s.value/2;for(const[x,q]of h){const E=y-q.x,j=T-q.y;if(Math.sqrt(E*E+j*j)<4){t.value=q,console.log(t.value);break}}}),b(),a=window.setInterval(()=>{b()},1e3)}),$r(()=>{clearInterval(a)});const p=()=>{console.log(t.value),t.value.targetId?e.$modal.confirm("?").then(function(){return Wn({targetId:t.value.targetId})}):zr({message:"",type:"error",duration:5*1e3})},b=()=>{Xn().then(f=>{r.value=f.data})},R=()=>{const f=n.value.getContext("2d"),d=f.canvas.width;f.canvas.height,f.fillStyle="white",f.fillRect(0,0,d,n.value.height);const _=d/2;f.beginPath(),f.arc(_,_,_,0,Math.PI*2),f.fillStyle="rgba(0, 0, 0, 0.8)",f.fill(),f.closePath();const g=5,v=_/g;for(let x=1;x<=g;x++){const q=v*x;f.beginPath(),f.arc(_,_,q,0,Math.PI*2,!0),f.strokeStyle="#2EB74E",f.stroke(),f.closePath()}const y=4,T=Math.PI*2/y;for(let x=0;x<y;x++){const q=T*x;f.beginPath(),f.moveTo(_,_),f.lineTo(_+Math.cos(q)*_,_+Math.sin(q)*_),f.strokeStyle="#2EB74E",f.stroke(),f.closePath()}},S=()=>{const f=n.value.getContext("2d"),_=f.canvas.width/2,g=new Date,v=new Date(g.getTime()-3e3);for(const[y,T]of h)if(new Date(T.scanTime)<v)h.delete(y);else{const{x:q,y:E,radius:j="4",isSelected:A,isScanShow:X=!0}=T;f.beginPath(),f.arc(_+q,_+E,j,0,Math.PI*2,!0),f.fillStyle=A?"red":"green",f.fill(),f.closePath()}},I=f=>{f-=90;const d=Math.PI;let _=null,g=f*(Math.PI/180);const v=n.value.getContext("2d"),y=v.canvas.width,T=y/2,x=q=>{if(_!=null){const j=(q-_)/1e3;g+=d*j,g%=2*Math.PI}_=q,v.clearRect(0,0,y,y),R(),v.beginPath(),v.moveTo(T,T),v.arc(T,T,T,g,g+Math.PI/(180/16),!1);const E=v.createLinearGradient(T,T,T+Math.cos(g)*T,T+Math.sin(g)*T);E.addColorStop(0,"rgba(46, 183, 78, 0.5)"),E.addColorStop(1,"rgba(46, 183, 78, 0.1)"),v.fillStyle=E,v.fill(),v.closePath(),S(),requestAnimationFrame(x)};x()};let C=!1;const m=f=>{c.value=f,c.value.flightPathItems&&c.value.flightPathItems.length>0&&c.value.flightPathItems.forEach(d=>{let{x:_,y:g}=w(d.azimuthAngle,d.horizontalDistance);d.x=_,d.y=g,d.scanTime=c.value.uploadTime,h.set(d.targetId,d)}),C||(C=!0,I(c.value.startingAngle,c.value.endAngle))},w=(f,d)=>{const g=(90-f+360)%360*Math.PI/180,v=Math.cos(g)*d/15e3*(s.value/2),y=Math.sin(g)*d/15e3*(s.value/2);return{x:v,y}};return(f,d)=>{const _=F("CaretRight"),g=F("el-icon"),v=F("dict-tag"),y=F("el-descriptions-item"),T=F("el-descriptions"),x=F("el-button");return Jr(),Hr("div",Dn,[U("div",Fn,[U("div",$n,[N(g,{style:{color:"#FFAA22"}},{default:k(()=>[N(_)]),_:1}),d[0]||(d[0]=U("span",null,"",-1))]),U("div",Hn,[U("canvas",{ref_key:"myCanvas",ref:n,class:"myCanvas"},null,512)])]),U("div",Jn,[U("div",Gn,[N(g,{style:{color:"#FFAA22"}},{default:k(()=>[N(_)]),_:1}),d[1]||(d[1]=U("span",null,"",-1))]),U("div",zn,[U("video",{ref_key:"videoRef",ref:l,autoplay:"",muted:"",style:{width:"100%"}},null,512),N(T,{border:"",style:{"margin-top":"5px"}},{default:k(()=>[N(y,{align:"center"},{label:k(()=>d[2]||(d[2]=[P("  ")])),default:k(()=>[N(v,{options:B(i),value:B(r)},null,8,["options","value"])]),_:1})]),_:1})])]),U("div",Vn,[U("div",Qn,[N(g,{style:{color:"#FFAA22"}},{default:k(()=>[N(_)]),_:1}),d[4]||(d[4]=U("span",null,"",-1)),N(x,{type:"primary",round:"",icon:B(Gr),style:{"margin-left":"5px"},size:"small",onClick:p},{default:k(()=>d[3]||(d[3]=[P("  ")])),_:1,__:[3]},8,["icon"])]),N(T,{column:4,border:"",style:{"margin-top":"5px"}},{default:k(()=>[N(y,{align:"center"},{label:k(()=>d[5]||(d[5]=[P("  ")])),default:k(()=>[N(v,{options:B(i),value:B(t).targetType},null,8,["options","value"])]),_:1}),N(y,{align:"center"},{label:k(()=>d[6]||(d[6]=[P("  ")])),default:k(()=>[N(v,{options:B(o),value:B(t).threatLevel},null,8,["options","value"])]),_:1}),N(y,{align:"center"},{label:k(()=>d[7]||(d[7]=[P(" (m) ")])),default:k(()=>[P(" "+$(B(t).horizontalDistance),1)]),_:1}),N(y,{align:"center"},{label:k(()=>d[8]||(d[8]=[P(" (m) ")])),default:k(()=>[P(" "+$(B(t).axialDistance),1)]),_:1}),N(y,{align:"center"},{label:k(()=>d[9]||(d[9]=[P("  ")])),default:k(()=>[P(" "+$(B(t).speed),1)]),_:1}),N(y,{align:"center"},{label:k(()=>d[10]||(d[10]=[P(" rcs(m) ")])),default:k(()=>[P(" "+$(B(t).rcs),1)]),_:1}),N(y,{align:"center"},{label:k(()=>d[11]||(d[11]=[P(" () ")])),default:k(()=>[P(" "+$(B(t).azimuthAngle),1)]),_:1}),N(y,{align:"center"},{label:k(()=>d[12]||(d[12]=[P(" () ")])),default:k(()=>[P(" "+$(B(t).pitchAngle),1)]),_:1})]),_:1})])])}}},Zn=Wr(Yn,[["__scopeId","data-v-53e30998"]]);export{Zn as default};
