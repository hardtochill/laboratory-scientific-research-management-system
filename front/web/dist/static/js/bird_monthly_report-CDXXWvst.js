import{T as N,_ as E,g as H,r as c,B as P,d as p,H as j,c as A,o as h,i as b,f as e,I as R,j as t,s as V,h as l,n as i,x as u,e as F,C as G}from"./index-VkklmaQD.js";function J(m){return N({url:"/monthlyReport/list",method:"get",params:m})}function K(m){return N({url:"/monthlyReport/"+m,method:"get"})}const O={class:"app-container"},Q={__name:"bird_monthly_report",setup(m){const{proxy:S}=H(),g=c(!1),B=c(!0),v=c(0),s=c({}),f=c(!1),w=c([]),_=c({pageNum:1,pageSize:10,threatLevel:void 0,targetType:void 0});P(()=>{C()});const y=o=>o.substring(0,7),C=()=>{f.value=!0,J(_.value).then(o=>{const n=o.data;w.value=n.rows,v.value=n.total,f.value=!1})};function $(o){S.download("monthlyReport/export",{id:o.id},`鸟情月报_${y(o.startDate)}.xlsx`)}function L(o){K(o.id).then(n=>{s.value=n.data,g.value=!0})}function T(o){return`${o}:00-${o+1}:00`}return(o,n)=>{const z=p("el-form"),a=p("el-table-column"),x=p("el-button"),D=p("el-table"),I=p("pagination"),d=p("el-descriptions-item"),M=p("el-descriptions"),U=p("el-dialog"),k=j("loading");return h(),A("div",O,[b(e(z,{model:t(_),ref:"queryRef",inline:!0},null,8,["model"]),[[R,t(B)]]),b((h(),V(D,{data:t(w)},{default:l(()=>[e(a,{type:"index",width:"40"}),e(a,{prop:"startDate",label:"月份",align:"center"},{default:l(r=>[i(u(y(r.row.startDate)),1)]),_:1}),e(a,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(a,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(a,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(a,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(a,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(a,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"}),e(a,{label:"操作",width:"250",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[e(x,{link:"",type:"success",icon:"View",onClick:q=>L(r.row)},{default:l(()=>n[3]||(n[3]=[i("详情")])),_:2,__:[3]},1032,["onClick"]),e(x,{link:"",type:"primary",icon:"Download",onClick:q=>$(r.row)},{default:l(()=>n[4]||(n[4]=[i("导出")])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,t(f)]]),b(e(I,{total:t(v),page:t(_).pageNum,"onUpdate:page":n[0]||(n[0]=r=>t(_).pageNum=r),limit:t(_).pageSize,"onUpdate:limit":n[1]||(n[1]=r=>t(_).pageSize=r),onPagination:C},null,8,["total","page","limit"]),[[R,t(v)>0]]),e(U,{title:"详情",modelValue:t(g),"onUpdate:modelValue":n[2]||(n[2]=r=>G(g)?g.value=r:null),width:"80%","append-to-body":""},{default:l(()=>[e(M,{column:3,border:""},{default:l(()=>[e(d,{label:"月份",span:3},{default:l(()=>[i(u(y(t(s).startDate)),1)]),_:1}),e(d,{label:"鸟出现次数"},{default:l(()=>[i(u(t(s).birdCount),1)]),_:1}),e(d,{label:"无人机出现次数"},{default:l(()=>[i(u(t(s).uavCount),1)]),_:1}),e(d,{label:"Ⅰ级威胁数量"},{default:l(()=>[i(u(t(s).count1),1)]),_:1}),e(d,{label:"Ⅱ级威胁数量"},{default:l(()=>[i(u(t(s).count2),1)]),_:1}),e(d,{label:"‌Ⅲ级威胁数量"},{default:l(()=>[i(u(t(s).count3),1)]),_:1}),e(d,{label:"Ⅳ级威胁数量"},{default:l(()=>[i(u(t(s).count4),1)]),_:1})]),_:1}),n[5]||(n[5]=F("div",{class:"tip"},"时段数据",-1)),b((h(),V(D,{data:t(s).monthlyReportTimeList},{default:l(()=>[e(a,{prop:"hour",label:"小时",align:"center"},{default:l(r=>[i(u(T(r.row.hour)),1)]),_:1}),e(a,{prop:"birdCount",label:"鸟出现次数",align:"center"}),e(a,{prop:"uavCount",label:"无人机出现次数",align:"center"}),e(a,{prop:"count1",label:"Ⅰ级威胁数量",align:"center"}),e(a,{prop:"count2",label:"Ⅱ级威胁数量",align:"center"}),e(a,{prop:"count3",label:"‌Ⅲ级威胁数量",align:"center"}),e(a,{prop:"count4",label:"Ⅳ级威胁数量",align:"center"})]),_:1},8,["data"])),[[k,t(f)]])]),_:1,__:[5]},8,["modelValue"])])}}},X=E(Q,[["__scopeId","data-v-8cce47a1"]]);export{X as default};
